{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/hooks/use-mobile.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\n\r\nexport function useIsMobile() {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setIsMobile(window.innerWidth < 768);\r\n    }\r\n    handleResize();\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  return isMobile;\r\n} "],"names":[],"mappings":";;;;AAAA;;;AAEO,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,IAAA,0KAAS;iCAAC;YACR,SAAS;gBACP,YAAY,OAAO,UAAU,GAAG;YAClC;YACA;YACA,OAAO,gBAAgB,CAAC,UAAU;YAClC;yCAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;gCAAG,EAAE;IACL,OAAO;AACT;GAXgB","debugId":null}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\r\n        outline:\r\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants } "],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2KAAgB,MAC7B,QAA0D;QAAzD,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO;IACtD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport const Sheet = SheetPrimitive.Root;\r\nexport const SheetContent = React.forwardRef<\r\n  React.ElementRef<typeof SheetPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SheetPrimitive.Portal>\r\n    <SheetPrimitive.Overlay className=\"fixed inset-0 z-50 bg-black/80\" />\r\n    <SheetPrimitive.Content\r\n      ref={ref}\r\n      className={cn('fixed z-50 bg-background p-6 shadow-lg', className)}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </SheetPrimitive.Close>\r\n    </SheetPrimitive.Content>\r\n  </SheetPrimitive.Portal>\r\n));\r\nSheetContent.displayName = 'SheetContent';\r\nexport const SheetTrigger = SheetPrimitive.Trigger; "],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AAEA;AAPA;;;;;;AASO,MAAM,QAAQ,6KAAmB;AACjC,MAAM,6BAAe,2KAAgB,MAG1C,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC,+KAAqB;;0BACpB,6LAAC,gLAAsB;gBAAC,WAAU;;;;;;0BAClC,6LAAC,gLAAsB;gBACrB,KAAK;gBACL,WAAW,IAAA,4HAAE,EAAC,0CAA0C;gBACvD,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAoB;wBAAC,WAAU;;0CAC9B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG;AACpB,MAAM,eAAe,gLAAsB","debugId":null}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/tooltip.tsx"],"sourcesContent":["import * as React from 'react';\r\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip';\r\n\r\nexport const TooltipProvider = TooltipPrimitive.Provider;\r\nexport const Tooltip = TooltipPrimitive.Root;\r\nexport const TooltipTrigger = TooltipPrimitive.Trigger;\r\nexport const TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    className={`z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md ${className || ''}`}\r\n    sideOffset={4}\r\n    {...props}\r\n  />\r\n));\r\nTooltipContent.displayName = 'TooltipContent'; "],"names":[],"mappings":";;;;;;;;;;;AAAA;AACA;;;;AAEO,MAAM,kBAAkB,kLAAyB;AACjD,MAAM,UAAU,8KAAqB;AACrC,MAAM,iBAAiB,iLAAwB;AAC/C,MAAM,+BAAiB,2KAAgB,MAG5C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,iLAAwB;QACvB,KAAK;QACL,WAAW,AAAC,2GAA0H,OAAhB,aAAa;QACnI,YAAY;QACX,GAAG,KAAK;;;;;;;;AAGb,eAAe,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/sidebar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { VariantProps, cva } from \"class-variance-authority\"\r\nimport { PanelLeft } from \"lucide-react\"\r\nimport Link from 'next/link';\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\n\r\n// --- FULL IMPLEMENTATION ---\r\n// (This is the full sidebar implementation as previously extracted from the Noman branch)\r\n\r\n// ... (full sidebar implementation here, including all exports) ...\r\n\r\n// Sidebar context and hooks\r\ninterface SidebarContextType {\r\n  state: string;\r\n  open: boolean;\r\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\r\n  isMobile: boolean;\r\n  openMobile: boolean;\r\n  setOpenMobile: React.Dispatch<React.SetStateAction<boolean>>;\r\n  toggleSidebar: () => void;\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContextType | undefined>(undefined);\r\n\r\nfunction useSidebar(): SidebarContextType {\r\n  const context = React.useContext(SidebarContext);\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\r\n  }\r\n  return context;\r\n}\r\n\r\ninterface SidebarProviderProps {\r\n  children: React.ReactNode;\r\n}\r\nconst SidebarProvider: React.FC<SidebarProviderProps> = ({ children }: SidebarProviderProps) => {\r\n  const isMobile = useIsMobile();\r\n  const [open, setOpen] = React.useState(true);\r\n  const [openMobile, setOpenMobile] = React.useState(false);\r\n  const state = open ? \"expanded\" : \"collapsed\";\r\n  const contextValue = React.useMemo(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar: () => (isMobile ? setOpenMobile((o: boolean) => !o) : setOpen((o: boolean) => !o)),\r\n    }),\r\n    [state, open, isMobile, openMobile]\r\n  );\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>{children}</TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  );\r\n};\r\n\r\ninterface SidebarProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n  className?: string;\r\n}\r\nconst Sidebar = React.forwardRef<HTMLDivElement, SidebarProps>(\r\n  ({ className, children, ...props }: SidebarProps, ref: React.Ref<HTMLDivElement>) => {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent className=\"w-64 bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\">\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    );\r\n  }\r\n  return (\r\n    <div ref={ref} className={cn(\"hidden md:block text-sidebar-foreground\", className)} data-state={state}>\r\n      <div className=\"fixed inset-y-0 left-0 z-10 h-full w-64 bg-[#e4e7f5] text-[#232946] px-2 py-4 flex flex-col\" style={{minHeight: '100vh'}}>\r\n        <div className=\"flex h-full w-full flex-col gap-2\">{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\nSidebar.displayName = \"Sidebar\";\r\n\r\ninterface SidebarHeaderProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n}\r\nconst SidebarHeader = React.forwardRef<HTMLDivElement, SidebarHeaderProps>(\r\n  ({ className, ...props }: SidebarHeaderProps, ref: React.Ref<HTMLDivElement>) => (\r\n  <div ref={ref} className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />\r\n));\r\nSidebarHeader.displayName = \"SidebarHeader\";\r\n\r\ninterface SidebarContentProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  className?: string;\r\n}\r\nconst SidebarContent = React.forwardRef<HTMLDivElement, SidebarContentProps>(\r\n  ({ className, ...props }: SidebarContentProps, ref: React.Ref<HTMLDivElement>) => (\r\n  <div ref={ref} className={cn(\"flex min-h-0 flex-1 flex-col gap-2 overflow-auto\", className)} {...props} />\r\n));\r\nSidebarContent.displayName = \"SidebarContent\";\r\n\r\ninterface SidebarMenuProps extends React.HTMLAttributes<HTMLUListElement> {\r\n  className?: string;\r\n}\r\nconst SidebarMenu = React.forwardRef<HTMLUListElement, SidebarMenuProps>(\r\n  ({ className, ...props }: SidebarMenuProps, ref: React.Ref<HTMLUListElement>) => (\r\n  <ul ref={ref} className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\r\n));\r\nSidebarMenu.displayName = \"SidebarMenu\";\r\n\r\ninterface SidebarMenuItemProps extends React.HTMLAttributes<HTMLLIElement> {\r\n  className?: string;\r\n}\r\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, SidebarMenuItemProps>(\r\n  ({ className, ...props }: SidebarMenuItemProps, ref: React.Ref<HTMLLIElement>) => (\r\n  <li ref={ref} className={cn(\"group/menu-item relative\", className)} {...props} />\r\n));\r\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\r\n\r\ninterface SidebarMenuButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  className?: string;\r\n  isActive?: boolean;\r\n  asChild?: boolean;\r\n}\r\nconst SidebarMenuButton = React.forwardRef<HTMLButtonElement, SidebarMenuButtonProps>(\r\n  ({ className, isActive, asChild, ...props }: SidebarMenuButtonProps, ref: React.Ref<HTMLButtonElement>) => {\r\n  const Comp = asChild ? Slot : \"button\";\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        isActive ? \"bg-sidebar-accent text-sidebar-accent-foreground font-medium\" : \"\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\r\n\r\ninterface SidebarTriggerProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n  className?: string;\r\n}\r\nconst SidebarTrigger = React.forwardRef<HTMLButtonElement, SidebarTriggerProps>(\r\n  ({ className, onClick, ...props }: SidebarTriggerProps, ref: React.Ref<HTMLButtonElement>) => {\r\n  const { toggleSidebar } = useSidebar();\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"h-7 w-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event);\r\n        toggleSidebar();\r\n      }}\r\n      {...props}\r\n    >\r\n      <PanelLeft />\r\n      <span className=\"sr-only\">Toggle Sidebar</span>\r\n    </Button>\r\n  );\r\n});\r\nSidebarTrigger.displayName = \"SidebarTrigger\";\r\n\r\ninterface SidebarInsetProps extends React.HTMLAttributes<HTMLElement> {\r\n  className?: string;\r\n}\r\nconst SidebarInset = React.forwardRef<HTMLElement, SidebarInsetProps>(\r\n  ({ className, ...props }: SidebarInsetProps, ref: React.Ref<HTMLElement>) => (\r\n  <main ref={ref} className={cn(\"relative flex min-h-screen flex-1 flex-col bg-background md:ml-64\", className)} {...props} />\r\n));\r\nSidebarInset.displayName = \"SidebarInset\";\r\n\r\nexport {\r\n  SidebarProvider,\r\n  Sidebar,\r\n  SidebarHeader,\r\n  SidebarContent,\r\n  SidebarMenu,\r\n  SidebarMenuItem,\r\n  SidebarMenuButton,\r\n  SidebarTrigger,\r\n  SidebarInset,\r\n  useSidebar,\r\n}; "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AAGA;AACA;AACA;AAGA;AAEA;;;AAfA;;;;;;;;;AAsCA,MAAM,+BAAiB,8KAAmB,CAAiC;AAE3E,SAAS;;IACP,MAAM,UAAU,2KAAgB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;GANS;AAWT,MAAM,kBAAkD;QAAC,EAAE,QAAQ,EAAwB;;IACzF,MAAM,WAAW,IAAA,gJAAW;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,yKAAc,CAAC;IACnD,MAAM,QAAQ,OAAO,aAAa;IAClC,MAAM,eAAe,wKAAa;iDAChC,IAAM,CAAC;gBACL;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,aAAa;6DAAE,IAAO,WAAW;qEAAc,CAAC,IAAe,CAAC;sEAAK;qEAAQ,CAAC,IAAe,CAAC;;;YAChG,CAAC;gDACD;QAAC;QAAO;QAAM;QAAU;KAAW;IAErC,qBACE,6LAAC,eAAe,QAAQ;QAAC,OAAO;kBAC9B,cAAA,6LAAC,yJAAe;YAAC,eAAe;sBAAI;;;;;;;;;;;AAG1C;IAtBM;;QACa,gJAAW;;;KADxB;AA4BN,MAAM,wBAAU,IAAA,2KAAgB,WAC9B,QAAkD;QAAjD,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAqB;;IAChD,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG;IACvD,IAAI,UAAU;QACZ,qBACE,6LAAC,6IAAK;YAAC,MAAM;YAAY,cAAc;YAAgB,GAAG,KAAK;sBAC7D,cAAA,6LAAC,oJAAY;gBAAC,WAAU;0BACtB,cAAA,6LAAC;oBAAI,WAAU;8BAA+B;;;;;;;;;;;;;;;;IAItD;IACA,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,2CAA2C;QAAY,cAAY;kBAC9F,cAAA,6LAAC;YAAI,WAAU;YAA8F,OAAO;gBAAC,WAAW;YAAO;sBACrI,cAAA,6LAAC;gBAAI,WAAU;0BAAqC;;;;;;;;;;;;;;;;AAI5D;;QAjByD;;;;QAAA;;;;AAkBzD,QAAQ,WAAW,GAAG;AAKtB,MAAM,8BAAgB,2KAAgB,OACpC,QAA8C;QAA7C,EAAE,SAAS,EAAE,GAAG,OAA2B;yBAC5C,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,2BAA2B;QAAa,GAAG,KAAK;;;;;;;;AAE/E,cAAc,WAAW,GAAG;AAK5B,MAAM,+BAAiB,2KAAgB,OACrC,QAA+C;QAA9C,EAAE,SAAS,EAAE,GAAG,OAA4B;yBAC7C,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,oDAAoD;QAAa,GAAG,KAAK;;;;;;;;AAExG,eAAe,WAAW,GAAG;AAK7B,MAAM,4BAAc,2KAAgB,OAClC,QAA4C;QAA3C,EAAE,SAAS,EAAE,GAAG,OAAyB;yBAC1C,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,sCAAsC;QAAa,GAAG,KAAK;;;;;;;;AAEzF,YAAY,WAAW,GAAG;AAK1B,MAAM,gCAAkB,2KAAgB,OACtC,QAAgD;QAA/C,EAAE,SAAS,EAAE,GAAG,OAA6B;yBAC9C,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,4BAA4B;QAAa,GAAG,KAAK;;;;;;;;AAE/E,gBAAgB,WAAW,GAAG;AAO9B,MAAM,kCAAoB,2KAAgB,QACxC,QAAqE;QAApE,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG,OAA+B;IACnE,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wJACA,WAAW,iEAAiE,IAC5E;QAED,GAAG,KAAK;;;;;;AAGf;;AACA,kBAAkB,WAAW,GAAG;AAKhC,MAAM,+BAAiB,IAAA,2KAAgB,YACrC,QAAwD;QAAvD,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAA4B;;IACtD,MAAM,EAAE,aAAa,EAAE,GAAG;IAC1B,qBACE,6LAAC,+IAAM;QACL,KAAK;QACL,SAAQ;QACR,MAAK;QACL,WAAW,IAAA,4HAAE,EAAC,WAAW;QACzB,SAAS,CAAC;YACR,oBAAA,8BAAA,QAAU;YACV;QACF;QACC,GAAG,KAAK;;0BAET,6LAAC,gOAAS;;;;;0BACV,6LAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC;;QAjB4B;;;;QAAA;;;;AAkB5B,eAAe,WAAW,GAAG;AAK7B,MAAM,6BAAe,2KAAgB,QACnC,QAA6C;QAA5C,EAAE,SAAS,EAAE,GAAG,OAA0B;yBAC3C,6LAAC;QAAK,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,qEAAqE;QAAa,GAAG,KAAK;;;;;;;;AAE1H,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n} "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,gBAAgB,gLAAuB;AAE7C,MAAM,eAAe,+KAAsB;AAE3C,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,CAGpC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;;KAVP;AAaN,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,2KAAgB,OAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,4HAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,6LAAC,8KAAqB;wBAAC,WAAU;;0CAC/B,6LAAC,oMAAC;gCAAC,WAAU;;;;;;0CACb,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe;QAAC,EACpB,SAAS,EACT,GAAG,OACkC;yBACrC,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;;MATP;AAYN,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,2KAAgB,OAGxC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,oLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,kBAAkB,WAAW,GAAG,oLAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,2KAAgB,MAG7B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,6KAAqB;QACpB,WAAW,IAAA,4HAAE,EACX,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,6LAAC,8KAAsB;YACrB,WAAW,IAAA,4HAAE,EACX;;;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,6KAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/layout/NotificationBell.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useTransition } from 'react';\r\nimport { Bell, AlertTriangle, ShoppingBasket, Utensils, Sparkles, Loader2, Tag } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { getInventory, InventoryItem } from '@/lib/inventoryService';\r\nimport { getDishes, Dish } from '@/lib/menuService';\r\nimport { suggestDiscountedDishes, SuggestDiscountedDishesInput, SuggestDiscountedDishesOutput } from '@/ai/flows/suggest-discounted-dishes';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { format, differenceInDays, parseISO, isValid } from 'date-fns';\r\n\r\nexport function NotificationBell() {\r\n  return (\r\n    <Button variant=\"ghost\" size=\"icon\" aria-label=\"Notifications\">\r\n      <Bell className=\"h-5 w-5\" />\r\n    </Button>\r\n  );\r\n} "],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAoBO,SAAS;IACd,qBACE,6LAAC,+IAAM;QAAC,SAAQ;QAAQ,MAAK;QAAO,cAAW;kBAC7C,cAAA,6LAAC,6MAAI;YAAC,WAAU;;;;;;;;;;;AAGtB;KANgB","debugId":null}},
    {"offset": {"line": 823, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/layout/AppLayout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport type { LucideIcon } from \"lucide-react\";\r\nimport {\r\n  ShoppingCart,\r\n  Table,\r\n  CreditCard,\r\n  Sparkles,\r\n  Boxes,\r\n  UtensilsCrossed,\r\n  History,\r\n  Barcode, // Import BarcodeIcon\r\n  LogOut, \r\n  Loader2,\r\n  MessageSquareQuote, // Added for AI Order Agent\r\n  BarChart3,\r\n  Calendar,\r\n  User, // Added for Receptionist\r\n  Settings, // Added for module settings\r\n  TrendingUp, // Added for Analytics\r\n  Truck, // Added for Supply Chain\r\n  Camera, // Added for Hardware Capture\r\n  FileText, // Added for Compliance Center\r\n  TrendingDown, // Added for Predictive Analytics\r\n} from \"lucide-react\";\r\nimport {\r\n  SidebarProvider,\r\n  Sidebar,\r\n  SidebarHeader,\r\n  SidebarContent,\r\n  SidebarMenu,\r\n  SidebarMenuItem,\r\n  SidebarMenuButton,\r\n  SidebarTrigger,\r\n  SidebarInset,\r\n  useSidebar,\r\n} from \"@/components/ui/sidebar\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\r\nimport { \r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n  DialogDescription\r\n} from '@/components/ui/dialog';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useWasteWatchDog } from \"@/contexts/WasteWatchDogContext\";\r\nimport { useSupplySync } from \"@/contexts/SupplySyncContext\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { NotificationBell } from \"./NotificationBell\";\r\n\r\ninterface NavItem {\r\n  href: string;\r\n  label: string;\r\n  icon: LucideIcon;\r\n}\r\n\r\nconst navItems: NavItem[] = [\r\n  { href: \"/menu-upload\", label: \"Menu Upload\", icon: Boxes },\r\n  { href: \"/receptionist\", label: \"Receptionist\", icon: User },\r\n];\r\n\r\nfunction SiteHeader({ pageTitle }: { pageTitle?: string }) {\r\n  const { isMobile } = useSidebar();\r\n  const { logout, currentUser } = useAuth();\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <header className=\"sticky top-0 z-40 flex h-16 items-center justify-between gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6\">\r\n        <Sheet>\r\n          <SheetTrigger asChild>\r\n            <Button size=\"icon\" variant=\"outline\" className=\"sm:hidden\">\r\n              <SidebarTrigger className=\"h-5 w-5\" />\r\n              <span className=\"sr-only\">Toggle Menu</span>\r\n            </Button>\r\n          </SheetTrigger>\r\n          <SheetContent className=\"sm:max-w-xs bg-sidebar text-sidebar-foreground p-0\">\r\n            <nav className=\"grid gap-6 text-lg font-medium p-4\">\r\n              <Link\r\n                href=\"/\"\r\n                className=\"group flex h-10 w-10 shrink-0 items-center justify-center gap-2 rounded-full bg-primary text-lg font-semibold text-primary-foreground md:text-base\"\r\n              >\r\n                <UtensilsCrossed className=\"h-5 w-5 transition-all group-hover:scale-110\" />\r\n                <span className=\"sr-only\">IOMS</span>\r\n              </Link>\r\n              {navItems.map((item) => (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  className=\"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground\"\r\n                >\r\n                  <item.icon className=\"h-5 w-5\" />\r\n                  {item.label}\r\n                </Link>\r\n              ))}\r\n               <Button variant=\"ghost\" onClick={logout} className=\"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground justify-start\">\r\n                <LogOut className=\"h-5 w-5\" />\r\n                Logout\r\n              </Button>\r\n            </nav>\r\n          </SheetContent>\r\n        </Sheet>\r\n        {pageTitle && <h1 className=\"text-xl font-semibold\">{pageTitle}</h1>}\r\n         <div className=\"flex items-center gap-2 sm:hidden\">\r\n            {currentUser && <NotificationBell />}\r\n            {currentUser && (\r\n              <Button variant=\"ghost\" size=\"icon\" onClick={logout} title=\"Logout\">\r\n                <LogOut className=\"h-5 w-5\" />\r\n              </Button>\r\n            )}\r\n          </div>\r\n      </header>\r\n    );\r\n  }\r\n\r\n  return (\r\n     <header className=\"sticky top-0 z-40 flex h-16 items-center justify-between gap-x-4 border-b bg-background px-4 sm:px-6\">\r\n        <div className=\"flex items-center gap-x-4\">\r\n            <SidebarTrigger className=\"hidden md:flex\" />\r\n            {pageTitle && <h1 className=\"text-xl font-semibold\">{pageTitle}</h1>}\r\n        </div>\r\n        <div className=\"flex items-center gap-4\">\r\n          {currentUser && <NotificationBell />}\r\n          {currentUser && (\r\n              <Button variant=\"outline\" onClick={logout} size=\"sm\">\r\n                <LogOut className=\"mr-2 h-4 w-4\" />\r\n                Logout ({currentUser.email?.split('@')[0]})\r\n              </Button>\r\n          )}\r\n        </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport function AppLayout({\r\n  children,\r\n  pageTitle,\r\n}: {\r\n  children: React.ReactNode;\r\n  pageTitle?: string;\r\n}) {\r\n  const pathname = usePathname();\r\n  const { currentUser, isLoading, logout } = useAuth();\r\n  const { isActive: isWasteWatchDogActive } = useWasteWatchDog();\r\n  const { isActive: isSupplySyncActive } = useSupplySync();\r\n  const router = useRouter();\r\n  const [setupOpen, setSetupOpen] = useState(false);\r\n  const [ordersOpen, setOrdersOpen] = useState(false);\r\n  const [reservationsOpen, setReservationsOpen] = useState(false);\r\n  const [aiToolOpen, setAiToolOpen] = useState(false);\r\n  const [inventoryOpen, setInventoryOpen] = useState(false);\r\n  const [wasteWatchDogOpen, setWasteWatchDogOpen] = useState(false);\r\n  \r\n  const [supplySyncOpen, setSupplySyncOpen] = useState(false);\r\n\r\n  const [settingsOpen, setSettingsOpen] = useState(false);\r\n\r\n  // Module visibility states\r\n  const [moduleVisibility, setModuleVisibility] = useState(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const stored = localStorage.getItem('ioms-module-visibility');\r\n      if (stored) {\r\n        return JSON.parse(stored);\r\n      }\r\n    }\r\n    return {\r\n      'WasteWatchDog': true,\r\n      'SupplySync': true,\r\n      'SmartInventory': false,\r\n      'SmartChef': false,\r\n      'Marketplace': true\r\n    };\r\n  });\r\n\r\n  // Clear any existing sidebar state on component mount to ensure fresh start\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      // Clear all sidebar-related sessionStorage keys\r\n      const keys = Object.keys(sessionStorage);\r\n      keys.forEach(key => {\r\n        if (key.startsWith('sidebar') && key.includes('Open')) {\r\n          sessionStorage.removeItem(key);\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Persist module visibility\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      localStorage.setItem('ioms-module-visibility', JSON.stringify(moduleVisibility));\r\n    }\r\n  }, [moduleVisibility]);\r\n\r\n  const toggleModuleVisibility = (moduleName: string) => {\r\n    setModuleVisibility((prev: any) => ({\r\n      ...prev,\r\n      [moduleName]: !prev[moduleName]\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !currentUser) {\r\n      router.push('/login');\r\n    }\r\n  }, [currentUser, isLoading, router]);\r\n\r\n  if (isLoading || !currentUser) {\r\n    return (\r\n      <div className=\"flex h-screen w-screen items-center justify-center bg-background\">\r\n        <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\r\n        <p className=\"ml-4 text-xl\">Loading application...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SidebarProvider>\r\n      <Sidebar>\r\n        <SidebarHeader className=\"p-4\">\r\n          <Link href=\"/\" className=\"flex items-center gap-2\">\r\n            <UtensilsCrossed className=\"h-8 w-8 text-sidebar-primary\" />\r\n            <h1 className=\"text-2xl font-semibold text-sidebar-foreground font-headline\">\r\n              IOMS\r\n            </h1>\r\n          </Link>\r\n        </SidebarHeader>\r\n        <SidebarContent>\r\n          <SidebarMenu>\r\n            {navItems.filter(item => !['POS', 'Order History', 'Order Analytics', 'Menu Upload', 'Reservation History', 'Reservation Analytics', 'Table Management', 'Receptionist'].includes(item.label)).map((item) => (\r\n              <SidebarMenuItem key={item.href}>\r\n                <SidebarMenuButton\r\n                  asChild\r\n                  isActive={pathname === item.href}\r\n                  className={cn(\r\n                    \"justify-start transition-all\",\r\n                    pathname === item.href\r\n                      ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                      : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                  )}\r\n                >\r\n                  <Link href={item.href} className=\"flex items-center gap-3\">\r\n                    <item.icon className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                    <span className=\"truncate\">{item.label}</span>\r\n                  </Link>\r\n                </SidebarMenuButton>\r\n              </SidebarMenuItem>\r\n            ))}\r\n            {/* Receptionist link */}\r\n            <SidebarMenuItem>\r\n              <SidebarMenuButton\r\n                asChild\r\n                isActive={pathname === '/receptionist'}\r\n                className={cn(\r\n                  \"justify-start transition-all\",\r\n                  pathname === '/receptionist'\r\n                    ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                    : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                )}\r\n              >\r\n                <Link href=\"/receptionist\" className=\"flex items-center gap-3\">\r\n                  <User className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                  <span className=\"truncate\">Receptionist</span>\r\n                </Link>\r\n              </SidebarMenuButton>\r\n            </SidebarMenuItem>\r\n            {/* 2. Reservations Section Dropdown */}\r\n            <SidebarMenuItem>\r\n              <button\r\n                className={cn(\r\n                  \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                  reservationsOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                )}\r\n                onClick={() => setReservationsOpen((open) => !open)}\r\n                aria-expanded={reservationsOpen}\r\n              >\r\n                <span className=\"mr-2\">ðŸ“…</span>\r\n                Reservations\r\n                <span className=\"ml-auto\">{reservationsOpen ? 'â–²' : 'â–¼'}</span>\r\n              </button>\r\n              {reservationsOpen && (\r\n                <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/table-management'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/table-management'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/table-management\" className=\"flex items-center gap-3\">\r\n                        <Table className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Table Management</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/reservation-history'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/reservation-history'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/reservation-history\" className=\"flex items-center gap-3\">\r\n                        <History className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Reservation History</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/reservation-analytics'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/reservation-analytics'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/reservation-analytics\" className=\"flex items-center gap-3\">\r\n                        <BarChart3 className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Reservation Analytics</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                </ul>\r\n              )}\r\n            </SidebarMenuItem>\r\n            {/* 3. Orders Section Dropdown */}\r\n            <SidebarMenuItem>\r\n              <button\r\n                className={cn(\r\n                  \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                  ordersOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                )}\r\n                onClick={() => setOrdersOpen((open) => !open)}\r\n                aria-expanded={ordersOpen}\r\n              >\r\n                <span className=\"mr-2\">ðŸ§¾</span>\r\n                Orders\r\n                <span className=\"ml-auto\">{ordersOpen ? 'â–²' : 'â–¼'}</span>\r\n              </button>\r\n              {ordersOpen && (\r\n                <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/payment'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/payment'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/payment\" className=\"flex items-center gap-3\">\r\n                        <CreditCard className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Payment</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/order-entry'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/order-entry'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/order-entry\" className=\"flex items-center gap-3\">\r\n                        <ShoppingCart className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">POS</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/order-history'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/order-history'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/order-history\" className=\"flex items-center gap-3\">\r\n                        <History className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Order History</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/order-analytics'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/order-analytics'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/order-analytics\" className=\"flex items-center gap-3\">\r\n                        <BarChart3 className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Order Analytics</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                </ul>\r\n              )}\r\n            </SidebarMenuItem>\r\n            {/* 4. Inventory Section Dropdown with subsections */}\r\n            <SidebarMenuItem>\r\n              <button\r\n                className={cn(\r\n                  \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                  inventoryOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                )}\r\n                onClick={() => setInventoryOpen((open) => !open)}\r\n                aria-expanded={inventoryOpen}\r\n              >\r\n                <span className=\"mr-2\">ðŸ“¦</span>\r\n                Inventory\r\n                <span className=\"ml-auto\">{inventoryOpen ? 'â–²' : 'â–¼'}</span>\r\n              </button>\r\n              {inventoryOpen && (\r\n                <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/inventory'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/inventory'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/inventory\" className=\"flex items-center gap-3\">\r\n                        <Boxes className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Inventory</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/serving-availability'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/serving-availability'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/serving-availability\" className=\"flex items-center gap-3\">\r\n                        <UtensilsCrossed className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Serving Availability</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/inventory-analytics'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/inventory-analytics'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/inventory-analytics\" className=\"flex items-center gap-3\">\r\n                        <BarChart3 className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Inventory Analytics</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/barcode-scanner'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/barcode-scanner'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/barcode-scanner\" className=\"flex items-center gap-3\">\r\n                        <Barcode className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Barcode Scanner</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                </ul>\r\n              )}\r\n            </SidebarMenuItem>\r\n            {/* Setup Section */}\r\n            <SidebarMenuItem>\r\n              <button\r\n                className={cn(\r\n                  \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                  setupOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                )}\r\n                onClick={() => setSetupOpen((open) => !open)}\r\n                aria-expanded={setupOpen}\r\n              >\r\n                <span className=\"mr-2\">âš™ï¸</span>\r\n                Setup\r\n                <span className=\"ml-auto\">{setupOpen ? 'â–²' : 'â–¼'}</span>\r\n              </button>\r\n              {setupOpen && (\r\n                <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/menu-upload'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/menu-upload'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/menu-upload\" className=\"flex items-center gap-3\">\r\n                        <Boxes className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Menu Upload</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  <li>\r\n                    <SidebarMenuButton\r\n                      asChild\r\n                      isActive={pathname === '/dining-area-setup'}\r\n                      className={cn(\r\n                        \"justify-start transition-all\",\r\n                        pathname === '/dining-area-setup'\r\n                          ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                          : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                      )}\r\n                    >\r\n                      <Link href=\"/dining-area-setup\" className=\"flex items-center gap-3\">\r\n                        <UtensilsCrossed className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                        <span className=\"truncate\">Dining Area Setup</span>\r\n                      </Link>\r\n                    </SidebarMenuButton>\r\n                  </li>\r\n                  {/* Add more setup links here */}\r\n                </ul>\r\n              )}\r\n            </SidebarMenuItem>\r\n\r\n            \r\n            {/* WasteWatchDog Section - Only visible when activated and module is visible */}\r\n            {isWasteWatchDogActive && moduleVisibility['WasteWatchDog'] !== false && (\r\n              <SidebarMenuItem>\r\n                <button\r\n                  className={cn(\r\n                    \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                    wasteWatchDogOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                  )}\r\n                  onClick={() => setWasteWatchDogOpen((open) => !open)}\r\n                  aria-expanded={wasteWatchDogOpen}\r\n                >\r\n                  <span className=\"mr-2\">â™»ï¸</span>\r\n                  WasteWatchDog\r\n                  <span className=\"ml-auto\">{wasteWatchDogOpen ? 'â–²' : 'â–¼'}</span>\r\n                </button>\r\n                {wasteWatchDogOpen && (\r\n                  <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/waste-watchdog'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/waste-watchdog'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/waste-watchdog\" className=\"flex items-center gap-3\">\r\n                          <BarChart3 className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Dashboard</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/waste-watchdog/analytics'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/waste-watchdog/analytics'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/waste-watchdog/analytics\" className=\"flex items-center gap-3\">\r\n                          <TrendingUp className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Analytics</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/waste-watchdog/hardware'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/waste-watchdog/hardware'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/waste-watchdog/hardware\" className=\"flex items-center gap-3\">\r\n                          <Camera className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Hardware Capture</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/waste-watchdog/compliance'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/waste-watchdog/compliance'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/waste-watchdog/compliance\" className=\"flex items-center gap-3\">\r\n                          <FileText className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Compliance Center</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/waste-watchdog/predictive'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/waste-watchdog/predictive'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/waste-watchdog/predictive\" className=\"flex items-center gap-3\">\r\n                          <TrendingDown className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Predictive Analytics</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                  </ul>\r\n                )}\r\n              </SidebarMenuItem>\r\n            )}\r\n\r\n            {/* SupplySync Section - Only visible when activated and module is visible */}\r\n            {isSupplySyncActive && moduleVisibility['SupplySync'] !== false && (\r\n              <SidebarMenuItem>\r\n                <button\r\n                  className={cn(\r\n                    \"flex w-full items-center gap-2 rounded-md p-2 text-left text-sm outline-none transition font-semibold\",\r\n                    supplySyncOpen ? \"bg-sidebar-accent text-sidebar-accent-foreground\" : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                  )}\r\n                  onClick={() => setSupplySyncOpen((open) => !open)}\r\n                  aria-expanded={supplySyncOpen}\r\n                >\r\n                  <span className=\"mr-2\">ðŸšš</span>\r\n                  SupplySync\r\n                  <span className=\"ml-auto\">{supplySyncOpen ? 'â–²' : 'â–¼'}</span>\r\n                </button>\r\n                {supplySyncOpen && (\r\n                  <ul className=\"ml-6 mt-1 flex flex-col gap-1\">\r\n                    <li>\r\n                      <SidebarMenuButton\r\n                        asChild\r\n                        isActive={pathname === '/apps/supply-sync'}\r\n                        className={cn(\r\n                          \"justify-start transition-all\",\r\n                          pathname === '/apps/supply-sync'\r\n                            ? \"bg-sidebar-accent text-sidebar-accent-foreground font-bold shadow-sm border-l-4 border-[#4C8BF5]\"\r\n                            : \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground border-l-4 border-transparent\"\r\n                        )}\r\n                      >\r\n                        <Link href=\"/apps/supply-sync\" className=\"flex items-center gap-3\">\r\n                          <Truck className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                          <span className=\"truncate\">Supply Dashboard</span>\r\n                        </Link>\r\n                      </SidebarMenuButton>\r\n                    </li>\r\n                  </ul>\r\n                )}\r\n              </SidebarMenuItem>\r\n            )}\r\n          </SidebarMenu>\r\n          \r\n          {/* Module Settings */}\r\n          <div className=\"px-4 py-2 border-t border-sidebar-border mt-4\">\r\n            <Dialog open={settingsOpen} onOpenChange={setSettingsOpen}>\r\n              <DialogTrigger asChild>\r\n                <Button \r\n                  variant=\"ghost\" \r\n                  size=\"sm\" \r\n                  className=\"w-full justify-start text-sidebar-foreground hover:bg-sidebar-accent\"\r\n                >\r\n                  <Settings className=\"w-4 h-4 mr-2\" />\r\n                  Module Settings\r\n                </Button>\r\n              </DialogTrigger>\r\n              <DialogContent className=\"max-w-md\">\r\n                <DialogHeader>\r\n                  <DialogTitle className=\"flex items-center gap-2\">\r\n                    <Settings className=\"w-5 h-5\" />\r\n                    Module Visibility Settings\r\n                  </DialogTitle>\r\n                  <DialogDescription>\r\n                    Toggle which specialized modules appear in your sidebar. Core navigation items are always visible.\r\n                  </DialogDescription>\r\n                </DialogHeader>\r\n                \r\n                <div className=\"space-y-4 py-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-2xl\">â™»ï¸</span>\r\n                      <div>\r\n                        <div className=\"font-medium\">WasteWatchDog</div>\r\n                        <div className=\"text-sm text-gray-500\">2 features</div>\r\n                      </div>\r\n                    </div>\r\n                    <Switch\r\n                      checked={moduleVisibility['WasteWatchDog'] !== false}\r\n                      onCheckedChange={() => toggleModuleVisibility('WasteWatchDog')}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-2xl\">ðŸ“¦</span>\r\n                      <div>\r\n                        <div className=\"font-medium\">SmartInventory</div>\r\n                        <div className=\"text-sm text-gray-500\">AI optimization</div>\r\n                      </div>\r\n                    </div>\r\n                    <Switch\r\n                      checked={moduleVisibility['SmartInventory'] !== false}\r\n                      onCheckedChange={() => toggleModuleVisibility('SmartInventory')}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-2xl\">ðŸ‘¨â€ðŸ³</span>\r\n                      <div>\r\n                        <div className=\"font-medium\">SmartChef</div>\r\n                        <div className=\"text-sm text-gray-500\">Recipe management</div>\r\n                      </div>\r\n                    </div>\r\n                    <Switch\r\n                      checked={moduleVisibility['SmartChef'] !== false}\r\n                      onCheckedChange={() => toggleModuleVisibility('SmartChef')}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <span className=\"text-2xl\">ðŸª</span>\r\n                      <div>\r\n                        <div className=\"font-medium\">Marketplace</div>\r\n                        <div className=\"text-sm text-gray-500\">Browse apps</div>\r\n                      </div>\r\n                    </div>\r\n                    <Switch\r\n                      checked={moduleVisibility['Marketplace'] !== false}\r\n                      onCheckedChange={() => toggleModuleVisibility('Marketplace')}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex justify-end pt-4 border-t\">\r\n                  <Button \r\n                    variant=\"outline\" \r\n                    onClick={() => setSettingsOpen(false)}\r\n                  >\r\n                    Done\r\n                  </Button>\r\n                </div>\r\n              </DialogContent>\r\n            </Dialog>\r\n          </div>\r\n        </SidebarContent>\r\n        <SidebarHeader className=\"border-t border-sidebar-border mt-auto\">\r\n           <SidebarMenu>\r\n             <SidebarMenuItem>\r\n                <SidebarMenuButton\r\n                    onClick={logout}\r\n                    className={cn(\r\n                        \"justify-start w-full\",\r\n                        \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\"\r\n                    )}\r\n                >\r\n                    <LogOut className=\"mr-2 h-5 w-5 shrink-0\" />\r\n                    <span className=\"truncate\">Logout</span>\r\n                </SidebarMenuButton>\r\n             </SidebarMenuItem>\r\n           </SidebarMenu>\r\n        </SidebarHeader>\r\n      </Sidebar>\r\n      <SidebarInset className=\"flex flex-col\">\r\n        <SiteHeader pageTitle={pageTitle} />\r\n        <main className=\"flex-1 overflow-auto p-4 md:p-6\">\r\n          {children}\r\n        </main>\r\n      </SidebarInset>\r\n    </SidebarProvider>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm text-muted-foreground\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent } "],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,2KAAgB,MAG3B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAGhC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,4HAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,2KAAgB,QAGjC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2977, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants } "],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,KAA4C;QAA5C,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB,GAA5C;IACb,qBACE,6LAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE;KAJS","debugId":null}},
    {"offset": {"line": 3026, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/contexts/tableStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\n\r\nexport interface Table {\r\n  id: string;\r\n  label: string;\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  shape: 'round' | 'square' | 'rect';\r\n  capacity: number;\r\n  seats: number;\r\n  zone?: string;\r\n  status?: 'available' | 'occupied' | 'reserved' | 'cleaning';\r\n  childIds?: string[]; // For merged tables\r\n  isVisible?: boolean;\r\n}\r\n\r\nexport interface Zone {\r\n  id: string;\r\n  name: string;\r\n  color: string;\r\n  isVisible: boolean;\r\n}\r\n\r\nexport interface ValidationResult {\r\n  isValid: boolean;\r\n  errors: string[];\r\n  overlappingTables?: string[];\r\n}\r\n\r\ninterface TableStoreState {\r\n  // Core State\r\n  tables: Table[];\r\n  zones: Zone[];\r\n  selectedTableId: string | null;\r\n  selectedTablesForMerge: string[];\r\n  isDraftMode: boolean;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  \r\n  // History Management\r\n  history: Array<{ tables: Table[]; zones: Zone[] }>;\r\n  historyIndex: number;\r\n  maxHistorySize: number;\r\n  \r\n  // Validation\r\n  validationErrors: string[];\r\n  \r\n  // Computed Properties\r\n  canUndo: boolean;\r\n  canRedo: boolean;\r\n}\r\n\r\ninterface TableStoreActions {\r\n  // Table Management\r\n  addTable: (params: { x: number; y: number; shape: Table['shape'] }) => void;\r\n  updateTable: (id: string, updates: Partial<Table>) => void;\r\n  moveTable: (id: string, x: number, y: number) => void;\r\n  resizeTable: (id: string, w: number, h: number) => void;\r\n  deleteTable: (id: string) => void;\r\n  selectTable: (id: string | null) => void;\r\n  \r\n  // Zone Management\r\n  addZone: (zone: Zone) => void;\r\n  updateZone: (id: string, updates: Partial<Zone>) => void;\r\n  deleteZone: (id: string) => void;\r\n  \r\n  // Merge/Split Operations\r\n  mergeTables: (tableIds: string[]) => void;\r\n  splitTable: (tableId: string) => void;\r\n  canMergeTables: (tableIds: string[]) => boolean;\r\n  toggleTableSelection: (id: string) => void;\r\n  clearTableSelection: () => void;\r\n  \r\n  // History\r\n  undo: () => void;\r\n  redo: () => void;\r\n  addToHistory: (tables: Table[], zones: Zone[]) => void;\r\n  \r\n  // Validation\r\n  validateLayout: () => ValidationResult;\r\n  \r\n  // Keyboard Navigation\r\n  nudgeTable: (id: string, direction: 'up' | 'down' | 'left' | 'right') => void;\r\n  \r\n  // Utility\r\n  getVisibleTables: () => Table[];\r\n  getAdjacentTables: (tableId: string) => string[];\r\n  resetStore: () => void;\r\n  \r\n  // API Integration\r\n  saveDraft: (floorId: string) => Promise<void>;\r\n  loadDraft: (floorId: string) => Promise<void>;\r\n  activateLayout: (floorId: string) => Promise<void>;\r\n}\r\n\r\ntype TableStore = TableStoreState & TableStoreActions;\r\n\r\nconst GRID_SIZE = 8;\r\nconst MIN_TABLE_SIZE = 40;\r\nconst DEFAULT_SIZES = {\r\n  round: { w: 60, h: 60 },\r\n  square: { w: 60, h: 60 },\r\n  rect: { w: 100, h: 60 }\r\n};\r\n\r\n// Helper Functions\r\nconst snapToGrid = (value: number): number => Math.round(value / GRID_SIZE) * GRID_SIZE;\r\n\r\nconst generateTableId = (existingTables: Table[]): string => {\r\n  const usedNumbers = existingTables\r\n    .map(t => t.label)\r\n    .filter(label => label.match(/^T\\d+$/))\r\n    .map(label => parseInt(label.substring(1)))\r\n    .filter(num => !isNaN(num));\r\n  \r\n  const maxNumber = usedNumbers.length > 0 ? Math.max(...usedNumbers) : 0;\r\n  return `T${maxNumber + 1}`;\r\n};\r\n\r\nconst checkTablesOverlap = (table1: Table, table2: Table): boolean => {\r\n  return !(\r\n    table1.x + table1.w <= table2.x ||\r\n    table2.x + table2.w <= table1.x ||\r\n    table1.y + table1.h <= table2.y ||\r\n    table2.y + table2.h <= table1.y\r\n  );\r\n};\r\n\r\nconst areTablesAdjacent = (table1: Table, table2: Table): boolean => {\r\n  const threshold = 5; // 5px tolerance\r\n  \r\n  // Check if tables are horizontally adjacent\r\n  const horizontallyAdjacent = (\r\n    Math.abs((table1.x + table1.w) - table2.x) <= threshold ||\r\n    Math.abs((table2.x + table2.w) - table1.x) <= threshold\r\n  ) && !(\r\n    table1.y + table1.h <= table2.y ||\r\n    table2.y + table2.h <= table1.y\r\n  );\r\n  \r\n  // Check if tables are vertically adjacent\r\n  const verticallyAdjacent = (\r\n    Math.abs((table1.y + table1.h) - table2.y) <= threshold ||\r\n    Math.abs((table2.y + table2.h) - table1.y) <= threshold\r\n  ) && !(\r\n    table1.x + table1.w <= table2.x ||\r\n    table2.x + table2.w <= table1.x\r\n  );\r\n  \r\n  return horizontallyAdjacent || verticallyAdjacent;\r\n};\r\n\r\nexport const useTableStore = create<TableStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Initial State\r\n      tables: [],\r\n      zones: [],\r\n      selectedTableId: null,\r\n      selectedTablesForMerge: [],\r\n      isDraftMode: true,\r\n      isLoading: false,\r\n      error: null,\r\n      history: [],\r\n      historyIndex: -1,\r\n      maxHistorySize: 20,\r\n      validationErrors: [],\r\n      canUndo: false,\r\n      canRedo: false,\r\n\r\n      // Table Management\r\n      addTable: ({ x, y, shape }) => {\r\n        const state = get();\r\n        const newTable: Table = {\r\n          id: crypto.randomUUID(),\r\n          label: generateTableId(state.tables),\r\n          x: snapToGrid(x),\r\n          y: snapToGrid(y),\r\n          w: DEFAULT_SIZES[shape].w,\r\n          h: DEFAULT_SIZES[shape].h,\r\n          shape,\r\n          capacity: 4,\r\n          seats: 4,\r\n          status: 'available',\r\n          isVisible: true\r\n        };\r\n\r\n        const newTables = [...state.tables, newTable];\r\n        set({ tables: newTables });\r\n        get().addToHistory(newTables, state.zones);\r\n        get().validateLayout();\r\n      },\r\n\r\n      updateTable: (id, updates) => {\r\n        const state = get();\r\n        const newTables = state.tables.map(table =>\r\n          table.id === id ? { ...table, ...updates } : table\r\n        );\r\n        set({ tables: newTables });\r\n        get().addToHistory(newTables, state.zones);\r\n        get().validateLayout();\r\n      },\r\n\r\n      moveTable: (id, x, y) => {\r\n        const state = get();\r\n        const newTables = state.tables.map(table =>\r\n          table.id === id \r\n            ? { ...table, x: snapToGrid(Math.max(0, x)), y: snapToGrid(Math.max(0, y)) }\r\n            : table\r\n        );\r\n        set({ tables: newTables });\r\n        get().validateLayout();\r\n      },\r\n\r\n      resizeTable: (id, w, h) => {\r\n        const state = get();\r\n        const newTables = state.tables.map(table =>\r\n          table.id === id \r\n            ? { \r\n                ...table, \r\n                w: Math.max(MIN_TABLE_SIZE, snapToGrid(w)), \r\n                h: Math.max(MIN_TABLE_SIZE, snapToGrid(h))\r\n              }\r\n            : table\r\n        );\r\n        set({ tables: newTables });\r\n        get().validateLayout();\r\n      },\r\n\r\n      deleteTable: (id) => {\r\n        const state = get();\r\n        const newTables = state.tables.filter(table => table.id !== id);\r\n        set({ \r\n          tables: newTables,\r\n          selectedTableId: state.selectedTableId === id ? null : state.selectedTableId\r\n        });\r\n        get().addToHistory(newTables, state.zones);\r\n        get().validateLayout();\r\n      },\r\n\r\n      selectTable: (id) => {\r\n        set({ selectedTableId: id });\r\n      },\r\n\r\n      // Zone Management\r\n      addZone: (zone) => {\r\n        const state = get();\r\n        const newZones = [...state.zones, zone];\r\n        set({ zones: newZones });\r\n        get().addToHistory(state.tables, newZones);\r\n      },\r\n\r\n      updateZone: (id, updates) => {\r\n        const state = get();\r\n        const newZones = state.zones.map(zone =>\r\n          zone.id === id ? { ...zone, ...updates } : zone\r\n        );\r\n        set({ zones: newZones });\r\n        get().addToHistory(state.tables, newZones);\r\n      },\r\n\r\n      deleteZone: (id) => {\r\n        const state = get();\r\n        const newZones = state.zones.filter(zone => zone.id !== id);\r\n        const newTables = state.tables.map(table =>\r\n          table.zone === id ? { ...table, zone: undefined } : table\r\n        );\r\n        set({ zones: newZones, tables: newTables });\r\n        get().addToHistory(newTables, newZones);\r\n      },\r\n\r\n      // Merge/Split Operations\r\n      mergeTables: (tableIds) => {\r\n        const state = get();\r\n        const tablesToMerge = state.tables.filter(t => tableIds.includes(t.id));\r\n        \r\n        if (tablesToMerge.length < 2) return;\r\n        \r\n        // Calculate merged table properties\r\n        const minX = Math.min(...tablesToMerge.map(t => t.x));\r\n        const minY = Math.min(...tablesToMerge.map(t => t.y));\r\n        const maxX = Math.max(...tablesToMerge.map(t => t.x + t.w));\r\n        const maxY = Math.max(...tablesToMerge.map(t => t.y + t.h));\r\n        \r\n        const mergedTable: Table = {\r\n          id: crypto.randomUUID(),\r\n          label: tablesToMerge.map(t => t.label).join('+'),\r\n          x: minX,\r\n          y: minY,\r\n          w: maxX - minX,\r\n          h: maxY - minY,\r\n          shape: 'rect',\r\n          capacity: tablesToMerge.reduce((sum, t) => sum + t.capacity, 0),\r\n          seats: tablesToMerge.reduce((sum, t) => sum + t.seats, 0),\r\n          childIds: tableIds,\r\n          status: 'available',\r\n          isVisible: true\r\n        };\r\n\r\n        const newTables = [\r\n          ...state.tables.filter(t => !tableIds.includes(t.id)),\r\n          mergedTable\r\n        ];\r\n\r\n        set({ \r\n          tables: newTables, \r\n          selectedTablesForMerge: [],\r\n          selectedTableId: mergedTable.id\r\n        });\r\n        get().addToHistory(newTables, state.zones);\r\n      },\r\n\r\n      splitTable: (tableId) => {\r\n        const state = get();\r\n        const tableToSplit = state.tables.find(t => t.id === tableId);\r\n        \r\n        if (!tableToSplit || !tableToSplit.childIds) return;\r\n        \r\n        // Restore original tables (simplified - in real app, store original positions)\r\n        const restoredTables = tableToSplit.childIds.map((childId, index) => ({\r\n          id: childId,\r\n          label: `T${Date.now()}_${index}`, // Generate new labels\r\n          x: tableToSplit.x + (index * 60),\r\n          y: tableToSplit.y,\r\n          w: 60,\r\n          h: 60,\r\n          shape: 'square' as const,\r\n          capacity: Math.floor(tableToSplit.capacity / tableToSplit.childIds!.length),\r\n          seats: Math.floor(tableToSplit.seats / tableToSplit.childIds!.length),\r\n          status: 'available' as const,\r\n          isVisible: true\r\n        }));\r\n\r\n        const newTables = [\r\n          ...state.tables.filter(t => t.id !== tableId),\r\n          ...restoredTables\r\n        ];\r\n\r\n        set({ \r\n          tables: newTables,\r\n          selectedTableId: null\r\n        });\r\n        get().addToHistory(newTables, state.zones);\r\n      },\r\n\r\n      canMergeTables: (tableIds) => {\r\n        const state = get();\r\n        const tables = state.tables.filter(t => tableIds.includes(t.id));\r\n        \r\n        if (tables.length < 2) return false;\r\n        \r\n        // Check if all tables are adjacent to at least one other\r\n        return tables.every(table1 => \r\n          tables.some(table2 => \r\n            table1.id !== table2.id && areTablesAdjacent(table1, table2)\r\n          )\r\n        );\r\n      },\r\n\r\n      toggleTableSelection: (id) => {\r\n        const state = get();\r\n        const isSelected = state.selectedTablesForMerge.includes(id);\r\n        const newSelection = isSelected\r\n          ? state.selectedTablesForMerge.filter(tableId => tableId !== id)\r\n          : [...state.selectedTablesForMerge, id];\r\n        \r\n        set({ selectedTablesForMerge: newSelection });\r\n      },\r\n\r\n      clearTableSelection: () => {\r\n        set({ selectedTablesForMerge: [] });\r\n      },\r\n\r\n      // History Management\r\n      undo: () => {\r\n        const state = get();\r\n        if (state.historyIndex > 0) {\r\n          const newIndex = state.historyIndex - 1;\r\n          const historyState = state.history[newIndex];\r\n          set({\r\n            tables: historyState.tables,\r\n            zones: historyState.zones,\r\n            historyIndex: newIndex,\r\n            canUndo: newIndex > 0,\r\n            canRedo: true\r\n          });\r\n        }\r\n      },\r\n\r\n      redo: () => {\r\n        const state = get();\r\n        if (state.historyIndex < state.history.length - 1) {\r\n          const newIndex = state.historyIndex + 1;\r\n          const historyState = state.history[newIndex];\r\n          set({\r\n            tables: historyState.tables,\r\n            zones: historyState.zones,\r\n            historyIndex: newIndex,\r\n            canUndo: true,\r\n            canRedo: newIndex < state.history.length - 1\r\n          });\r\n        }\r\n      },\r\n\r\n      addToHistory: (tables, zones) => {\r\n        const state = get();\r\n        const newHistoryEntry = { tables: [...tables], zones: [...zones] };\r\n        \r\n        // Remove entries after current index\r\n        const newHistory = state.history.slice(0, state.historyIndex + 1);\r\n        newHistory.push(newHistoryEntry);\r\n        \r\n        // Limit history size\r\n        const trimmedHistory = newHistory.slice(-state.maxHistorySize);\r\n        const newIndex = trimmedHistory.length - 1;\r\n        \r\n        set({\r\n          history: trimmedHistory,\r\n          historyIndex: newIndex,\r\n          canUndo: newIndex > 0,\r\n          canRedo: false\r\n        });\r\n      },\r\n\r\n      // Validation\r\n      validateLayout: () => {\r\n        const state = get();\r\n        const errors: string[] = [];\r\n        const overlappingTables: string[] = [];\r\n\r\n        // Check for overlapping tables\r\n        for (let i = 0; i < state.tables.length; i++) {\r\n          for (let j = i + 1; j < state.tables.length; j++) {\r\n            if (checkTablesOverlap(state.tables[i], state.tables[j])) {\r\n              errors.push('TABLES_OVERLAP');\r\n              overlappingTables.push(state.tables[i].id, state.tables[j].id);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Check for duplicate IDs\r\n        const labels = state.tables.map(t => t.label);\r\n        const duplicateLabels = labels.filter((label, index) => labels.indexOf(label) !== index);\r\n        if (duplicateLabels.length > 0) {\r\n          errors.push('DUPLICATE_TABLE_ID');\r\n        }\r\n\r\n        // Check capacity constraints\r\n        const invalidCapacity = state.tables.some(t => t.capacity < 1);\r\n        if (invalidCapacity) {\r\n          errors.push('INVALID_CAPACITY');\r\n        }\r\n\r\n        // Check bounds\r\n        const outOfBounds = state.tables.some(t => t.x < 0 || t.y < 0);\r\n        if (outOfBounds) {\r\n          errors.push('TABLE_OUT_OF_BOUNDS');\r\n        }\r\n\r\n        const result: ValidationResult = {\r\n          isValid: errors.length === 0,\r\n          errors: [...new Set(errors)],\r\n          overlappingTables: [...new Set(overlappingTables)]\r\n        };\r\n\r\n        set({ validationErrors: result.errors });\r\n        return result;\r\n      },\r\n\r\n      // Keyboard Navigation\r\n      nudgeTable: (id, direction) => {\r\n        const state = get();\r\n        const table = state.tables.find(t => t.id === id);\r\n        if (!table) return;\r\n\r\n        let newX = table.x;\r\n        let newY = table.y;\r\n\r\n        switch (direction) {\r\n          case 'up':\r\n            newY = Math.max(0, table.y - GRID_SIZE);\r\n            break;\r\n          case 'down':\r\n            newY = table.y + GRID_SIZE;\r\n            break;\r\n          case 'left':\r\n            newX = Math.max(0, table.x - GRID_SIZE);\r\n            break;\r\n          case 'right':\r\n            newX = table.x + GRID_SIZE;\r\n            break;\r\n        }\r\n\r\n        get().moveTable(id, newX, newY);\r\n      },\r\n\r\n      // Utility Functions\r\n      getVisibleTables: () => {\r\n        const state = get();\r\n        return state.tables.filter(table => {\r\n          if (!table.zone) return true;\r\n          const zone = state.zones.find(z => z.id === table.zone);\r\n          return zone ? zone.isVisible : true;\r\n        });\r\n      },\r\n\r\n      getAdjacentTables: (tableId) => {\r\n        const state = get();\r\n        const table = state.tables.find(t => t.id === tableId);\r\n        if (!table) return [];\r\n\r\n        return state.tables\r\n          .filter(t => t.id !== tableId && areTablesAdjacent(table, t))\r\n          .map(t => t.id);\r\n      },\r\n\r\n      resetStore: () => {\r\n        set({\r\n          tables: [],\r\n          zones: [],\r\n          selectedTableId: null,\r\n          selectedTablesForMerge: [],\r\n          isDraftMode: true,\r\n          isLoading: false,\r\n          error: null,\r\n          history: [],\r\n          historyIndex: -1,\r\n          validationErrors: [],\r\n          canUndo: false,\r\n          canRedo: false\r\n        });\r\n      },\r\n\r\n      // API Integration\r\n      saveDraft: async (floorId) => {\r\n        const state = get();\r\n        set({ isLoading: true, error: null });\r\n\r\n        try {\r\n          const response = await fetch('/api/pos/floor/layout/draft', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-tenant-id': 'default'\r\n            },\r\n            body: JSON.stringify({\r\n              floorId,\r\n              layoutDraft: {\r\n                tables: state.tables,\r\n                zones: state.zones\r\n              }\r\n            })\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error('Failed to save draft');\r\n          }\r\n\r\n          set({ isLoading: false });\r\n        } catch (error) {\r\n          set({ \r\n            isLoading: false, \r\n            error: error instanceof Error ? error.message : 'Unknown error'\r\n          });\r\n        }\r\n      },\r\n\r\n      loadDraft: async (floorId) => {\r\n        set({ isLoading: true, error: null });\r\n\r\n        try {\r\n          const response = await fetch(`/api/pos/floor/layout/draft?floorId=${floorId}`, {\r\n            headers: {\r\n              'x-tenant-id': 'default'\r\n            }\r\n          });\r\n\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            if (data.layoutDraft) {\r\n              set({\r\n                tables: data.layoutDraft.tables || [],\r\n                zones: data.layoutDraft.zones || [],\r\n                isLoading: false\r\n              });\r\n              get().addToHistory(data.layoutDraft.tables || [], data.layoutDraft.zones || []);\r\n            }\r\n          } else {\r\n            // No existing draft, start fresh\r\n            set({ isLoading: false });\r\n          }\r\n        } catch (error) {\r\n          set({ \r\n            isLoading: false,\r\n            error: error instanceof Error ? error.message : 'Failed to load draft'\r\n          });\r\n        }\r\n      },\r\n\r\n      activateLayout: async (floorId) => {\r\n        const state = get();\r\n        const validation = get().validateLayout();\r\n        \r\n        if (!validation.isValid) {\r\n          set({ error: 'Cannot activate layout with validation errors' });\r\n          return;\r\n        }\r\n\r\n        set({ isLoading: true, error: null });\r\n\r\n        try {\r\n          const response = await fetch('/api/pos/floor/layout/activate', {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-tenant-id': 'default'\r\n            },\r\n            body: JSON.stringify({\r\n              floorId,\r\n              expectVersion: 1\r\n            })\r\n          });\r\n\r\n          if (!response.ok) {\r\n            throw new Error('Failed to activate layout');\r\n          }\r\n\r\n          set({ isLoading: false, isDraftMode: false });\r\n        } catch (error) {\r\n          set({ \r\n            isLoading: false,\r\n            error: error instanceof Error ? error.message : 'Failed to activate layout'\r\n          });\r\n        }\r\n      }\r\n    }),\r\n    {\r\n      name: 'table-store',\r\n      partialize: (state) => ({\r\n        tables: state.tables,\r\n        zones: state.zones,\r\n        isDraftMode: state.isDraftMode\r\n      })\r\n    }\r\n  )\r\n);\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3556, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/lib/stores/tableStore.ts"],"sourcesContent":["import { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\n\r\nexport interface TableNode {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  shape: 'round' | 'square' | 'rect';\r\n  capacity: number;\r\n  seats: number;\r\n  label?: string;\r\n  zoneId?: string;\r\n  childIds?: string[]; // For merged tables\r\n  metadata?: Record<string, any>;\r\n}\r\n\r\nexport interface Zone {\r\n  id: string;\r\n  name: string;\r\n  color: string;\r\n  visible: boolean;\r\n}\r\n\r\nexport interface TableState {\r\n  id: string;\r\n  status: 'FREE' | 'SEATED' | 'DIRTY' | 'RESERVED';\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface LayoutHistory {\r\n  timestamp: string;\r\n  tables: TableNode[];\r\n  zones: Zone[];\r\n  action: string;\r\n}\r\n\r\ninterface TableStore {\r\n  // Layout state\r\n  tables: TableNode[];\r\n  zones: Zone[];\r\n  selectedTable: TableNode | null;\r\n  isDragging: boolean;\r\n  snapToGrid: boolean;\r\n  gridSize: number;\r\n  canvasSize: { width: number; height: number };\r\n  layoutVersion: number;\r\n  \r\n  // Real-time status\r\n  tableStates: Record<string, TableState>;\r\n  \r\n  // Draft management\r\n  hasDraft: boolean;\r\n  draftSavedAt: string | null;\r\n  lastActivatedAt: string | null;\r\n  \r\n  // History for undo/redo\r\n  history: LayoutHistory[];\r\n  historyIndex: number;\r\n  maxHistoryLength: number;\r\n  \r\n  // Validation state\r\n  validationErrors: string[];\r\n  \r\n  // Actions\r\n  addTable: (table: Omit<TableNode, 'id'>) => string;\r\n  updateTable: (id: string, updates: Partial<TableNode>) => void;\r\n  deleteTable: (id: string) => void;\r\n  selectTable: (id: string | null) => void;\r\n  moveTable: (id: string, x: number, y: number) => void;\r\n  resizeTable: (id: string, w: number, h: number) => void;\r\n  nudgeTable: (id: string, direction: 'up' | 'down' | 'left' | 'right') => void;\r\n  \r\n  // Zone management\r\n  addZone: (zone: Omit<Zone, 'id'>) => string;\r\n  updateZone: (id: string, updates: Partial<Zone>) => void;\r\n  deleteZone: (id: string) => void;\r\n  assignTableToZone: (tableId: string, zoneId: string | null) => void;\r\n  toggleZoneVisibility: (zoneId: string) => void;\r\n  \r\n  // Status management\r\n  updateTableStatus: (tableId: string, status: TableState['status']) => void;\r\n  \r\n  // Layout management\r\n  saveDraft: () => Promise<void>;\r\n  loadDraft: () => Promise<void>;\r\n  clearDraft: () => void;\r\n  activateLayout: () => Promise<void>;\r\n  \r\n  // Merge/Split operations\r\n  mergeTables: (tableId1: string, tableId2: string) => string | null;\r\n  splitTable: (mergedTableId: string) => boolean;\r\n  canMergeTables: (tableId1: string, tableId2: string) => boolean;\r\n  \r\n  // History management\r\n  undo: () => void;\r\n  redo: () => void;\r\n  canUndo: () => boolean;\r\n  canRedo: () => boolean;\r\n  addToHistory: (action: string) => void;\r\n  \r\n  // Validation\r\n  validateLayout: () => string[];\r\n  hasValidationErrors: () => boolean;\r\n  \r\n  // Utility\r\n  getTableById: (id: string) => TableNode | undefined;\r\n  getTablesInZone: (zoneId: string) => TableNode[];\r\n  hasOverlap: (tableId?: string) => boolean;\r\n  hasOverlaps: () => boolean;\r\n  generateNextTableId: () => string;\r\n  snapPosition: (x: number, y: number) => { x: number; y: number };\r\n  isWithinCanvas: (x: number, y: number, w: number, h: number) => boolean;\r\n  getAdjacentTables: (tableId: string) => TableNode[];\r\n  \r\n  // Reset\r\n  reset: () => void;\r\n}\r\n\r\nconst initialState = {\r\n  tables: [],\r\n  zones: [\r\n    { id: 'indoor', name: 'Indoor', color: '#3B82F6', visible: true },\r\n    { id: 'patio', name: 'Patio', color: '#10B981', visible: true },\r\n    { id: 'bar', name: 'Bar', color: '#F59E0B', visible: true },\r\n  ],\r\n  selectedTable: null,\r\n  isDragging: false,\r\n  snapToGrid: true,\r\n  gridSize: 8,\r\n  canvasSize: { width: 1200, height: 800 },\r\n  layoutVersion: 1,\r\n  tableStates: {},\r\n  hasDraft: false,\r\n  draftSavedAt: null,\r\n  lastActivatedAt: null,\r\n  history: [],\r\n  historyIndex: -1,\r\n  maxHistoryLength: 20,\r\n  validationErrors: [],\r\n};\r\n\r\nexport const useTableStore = create<TableStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      ...initialState,\r\n      \r\n      addTable: (tableData) => {\r\n        const id = get().generateNextTableId();\r\n        const newTable: TableNode = {\r\n          id,\r\n          seats: tableData.capacity,\r\n          label: id,\r\n          ...tableData,\r\n        };\r\n        \r\n        set((state) => {\r\n          const newState = {\r\n            tables: [...state.tables, newTable],\r\n            hasDraft: true,\r\n            layoutVersion: state.layoutVersion + 1,\r\n          };\r\n          get().addToHistory('ADD_TABLE');\r\n          return newState;\r\n        });\r\n        \r\n        return id;\r\n      },\r\n      \r\n      updateTable: (id, updates) => {\r\n        set((state) => {\r\n          const updatedTables = state.tables.map((table) =>\r\n            table.id === id ? { ...table, ...updates } : table\r\n          );\r\n          \r\n          get().addToHistory('UPDATE_TABLE');\r\n          \r\n          return {\r\n            tables: updatedTables,\r\n            hasDraft: true,\r\n            layoutVersion: state.layoutVersion + 1,\r\n          };\r\n        });\r\n      },\r\n      \r\n      deleteTable: (id) => {\r\n        set((state) => {\r\n          get().addToHistory('DELETE_TABLE');\r\n          \r\n          return {\r\n            tables: state.tables.filter((table) => table.id !== id),\r\n            selectedTable: state.selectedTable?.id === id ? null : state.selectedTable,\r\n            hasDraft: true,\r\n            layoutVersion: state.layoutVersion + 1,\r\n          };\r\n        });\r\n      },\r\n      \r\n      selectTable: (id) => {\r\n        const table = id ? get().getTableById(id) : null;\r\n        set({ selectedTable: table });\r\n      },\r\n      \r\n      moveTable: (id, x, y) => {\r\n        const { snapPosition, snapToGrid, isWithinCanvas } = get();\r\n        const table = get().getTableById(id);\r\n        if (!table) return;\r\n        \r\n        const snappedPos = snapToGrid ? snapPosition(x, y) : { x, y };\r\n        \r\n        // Ensure table stays within canvas bounds\r\n        if (!isWithinCanvas(snappedPos.x, snappedPos.y, table.w, table.h)) {\r\n          return;\r\n        }\r\n        \r\n        set((state) => ({\r\n          tables: state.tables.map((table) =>\r\n            table.id === id ? { ...table, x: snappedPos.x, y: snappedPos.y } : table\r\n          ),\r\n          hasDraft: true,\r\n          layoutVersion: state.layoutVersion + 1,\r\n        }));\r\n      },\r\n      \r\n      resizeTable: (id, w, h) => {\r\n        const { gridSize, snapToGrid } = get();\r\n        const minSize = gridSize * 6; // Minimum 48px\r\n        \r\n        const snappedW = snapToGrid ? Math.round(w / gridSize) * gridSize : w;\r\n        const snappedH = snapToGrid ? Math.round(h / gridSize) * gridSize : h;\r\n        \r\n        set((state) => ({\r\n          tables: state.tables.map((table) =>\r\n            table.id === id ? { \r\n              ...table, \r\n              w: Math.max(snappedW, minSize), \r\n              h: Math.max(snappedH, minSize) \r\n            } : table\r\n          ),\r\n          hasDraft: true,\r\n          layoutVersion: state.layoutVersion + 1,\r\n        }));\r\n      },\r\n      \r\n      nudgeTable: (id, direction) => {\r\n        const { gridSize } = get();\r\n        const table = get().getTableById(id);\r\n        if (!table) return;\r\n        \r\n        let newX = table.x;\r\n        let newY = table.y;\r\n        \r\n        switch (direction) {\r\n          case 'up': newY -= gridSize; break;\r\n          case 'down': newY += gridSize; break;\r\n          case 'left': newX -= gridSize; break;\r\n          case 'right': newX += gridSize; break;\r\n        }\r\n        \r\n        get().moveTable(id, newX, newY);\r\n      },\r\n      \r\n      addZone: (zoneData) => {\r\n        const id = crypto.randomUUID();\r\n        const newZone: Zone = { id, ...zoneData };\r\n        \r\n        set((state) => ({\r\n          zones: [...state.zones, newZone],\r\n        }));\r\n        \r\n        return id;\r\n      },\r\n      \r\n      updateZone: (id, updates) => {\r\n        set((state) => ({\r\n          zones: state.zones.map((zone) =>\r\n            zone.id === id ? { ...zone, ...updates } : zone\r\n          ),\r\n        }));\r\n      },\r\n      \r\n      deleteZone: (id) => {\r\n        set((state) => ({\r\n          zones: state.zones.filter((zone) => zone.id !== id),\r\n          // Remove zone assignment from tables\r\n          tables: state.tables.map((table) =>\r\n            table.zoneId === id ? { ...table, zoneId: undefined } : table\r\n          ),\r\n        }));\r\n      },\r\n      \r\n      assignTableToZone: (tableId, zoneId) => {\r\n        set((state) => ({\r\n          tables: state.tables.map((table) =>\r\n            table.id === tableId ? { ...table, zoneId } : table\r\n          ),\r\n          hasDraft: true,\r\n          layoutVersion: state.layoutVersion + 1,\r\n        }));\r\n      },\r\n      \r\n      toggleZoneVisibility: (zoneId) => {\r\n        set((state) => ({\r\n          zones: state.zones.map((zone) =>\r\n            zone.id === zoneId ? { ...zone, visible: !zone.visible } : zone\r\n          ),\r\n        }));\r\n      },\r\n      \r\n      updateTableStatus: (tableId, status) => {\r\n        set((state) => ({\r\n          tableStates: {\r\n            ...state.tableStates,\r\n            [tableId]: {\r\n              id: tableId,\r\n              status,\r\n              updatedAt: new Date().toISOString(),\r\n            },\r\n          },\r\n        }));\r\n      },\r\n      \r\n      saveDraft: async () => {\r\n        const state = get();\r\n        try {\r\n          const response = await fetch('/api/pos/floor/layout/draft', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-tenant-id': 'default-tenant', // TODO: Get from auth context\r\n            },\r\n            body: JSON.stringify({\r\n              floorId: 'main-floor',\r\n              layoutDraft: {\r\n                tables: state.tables,\r\n                zones: state.zones,\r\n              },\r\n              version: state.layoutVersion,\r\n            }),\r\n          });\r\n          \r\n          if (!response.ok) {\r\n            throw new Error('Failed to save draft');\r\n          }\r\n          \r\n          const data = await response.json();\r\n          \r\n          set({\r\n            hasDraft: true,\r\n            draftSavedAt: new Date().toISOString(),\r\n            layoutVersion: data.version || state.layoutVersion,\r\n          });\r\n        } catch (error) {\r\n          console.error('Error saving draft:', error);\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      loadDraft: async () => {\r\n        try {\r\n          const response = await fetch('/api/pos/floor/layout/draft?floorId=main-floor', {\r\n            headers: {\r\n              'x-tenant-id': 'default-tenant',\r\n            },\r\n          });\r\n          \r\n          if (!response.ok) {\r\n            throw new Error('Failed to load draft');\r\n          }\r\n          \r\n          const data = await response.json();\r\n          \r\n          if (data.layoutDraft) {\r\n            set({\r\n              tables: data.layoutDraft.tables || [],\r\n              zones: data.layoutDraft.zones || [],\r\n              layoutVersion: data.version || 1,\r\n              hasDraft: true,\r\n              draftSavedAt: data.updatedAt,\r\n            });\r\n          }\r\n        } catch (error) {\r\n          console.error('Error loading draft:', error);\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      clearDraft: () => {\r\n        set({\r\n          hasDraft: false,\r\n          draftSavedAt: null,\r\n        });\r\n      },\r\n      \r\n      activateLayout: async () => {\r\n        const state = get();\r\n        \r\n        // Validate before activation\r\n        const errors = get().validateLayout();\r\n        if (errors.length > 0) {\r\n          throw new Error(`Cannot activate layout with errors: ${errors.join(', ')}`);\r\n        }\r\n        \r\n        try {\r\n          const response = await fetch('/api/pos/floor/layout/activate', {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'x-tenant-id': 'default-tenant',\r\n            },\r\n            body: JSON.stringify({\r\n              floorId: 'main-floor',\r\n              expectVersion: state.layoutVersion,\r\n            }),\r\n          });\r\n          \r\n          if (!response.ok) {\r\n            throw new Error('Failed to activate layout');\r\n          }\r\n          \r\n          set({\r\n            hasDraft: false,\r\n            lastActivatedAt: new Date().toISOString(),\r\n          });\r\n        } catch (error) {\r\n          console.error('Error activating layout:', error);\r\n          throw error;\r\n        }\r\n      },\r\n      \r\n      // Merge/Split operations\r\n      mergeTables: (tableId1, tableId2) => {\r\n        const { canMergeTables, generateNextTableId } = get();\r\n        \r\n        if (!canMergeTables(tableId1, tableId2)) {\r\n          return null;\r\n        }\r\n        \r\n        const table1 = get().getTableById(tableId1);\r\n        const table2 = get().getTableById(tableId2);\r\n        \r\n        if (!table1 || !table2) return null;\r\n        \r\n        const mergedId = generateNextTableId();\r\n        const mergedTable: TableNode = {\r\n          id: mergedId,\r\n          x: Math.min(table1.x, table2.x),\r\n          y: Math.min(table1.y, table2.y),\r\n          w: Math.max(table1.x + table1.w, table2.x + table2.w) - Math.min(table1.x, table2.x),\r\n          h: Math.max(table1.y + table1.h, table2.y + table2.h) - Math.min(table1.y, table2.y),\r\n          shape: 'rect', // Merged tables are always rectangular\r\n          capacity: table1.capacity + table2.capacity,\r\n          seats: table1.seats + table2.seats,\r\n          label: `${table1.label || table1.id}+${table2.label || table2.id}`,\r\n          zoneId: table1.zoneId || table2.zoneId,\r\n          childIds: [tableId1, tableId2],\r\n          metadata: {\r\n            merged: true,\r\n            originalTables: [\r\n              { ...table1 },\r\n              { ...table2 },\r\n            ],\r\n          },\r\n        };\r\n        \r\n        set((state) => {\r\n          get().addToHistory('MERGE_TABLES');\r\n          \r\n          return {\r\n            tables: [\r\n              ...state.tables.filter(t => t.id !== tableId1 && t.id !== tableId2),\r\n              mergedTable,\r\n            ],\r\n            hasDraft: true,\r\n            layoutVersion: state.layoutVersion + 1,\r\n          };\r\n        });\r\n        \r\n        return mergedId;\r\n      },\r\n      \r\n      splitTable: (mergedTableId) => {\r\n        const mergedTable = get().getTableById(mergedTableId);\r\n        \r\n        if (!mergedTable?.childIds || !mergedTable.metadata?.originalTables) {\r\n          return false;\r\n        }\r\n        \r\n        const originalTables = mergedTable.metadata.originalTables as TableNode[];\r\n        \r\n        set((state) => {\r\n          get().addToHistory('SPLIT_TABLE');\r\n          \r\n          return {\r\n            tables: [\r\n              ...state.tables.filter(t => t.id !== mergedTableId),\r\n              ...originalTables,\r\n            ],\r\n            hasDraft: true,\r\n            layoutVersion: state.layoutVersion + 1,\r\n          };\r\n        });\r\n        \r\n        return true;\r\n      },\r\n      \r\n      canMergeTables: (tableId1, tableId2) => {\r\n        const adjacentTables = get().getAdjacentTables(tableId1);\r\n        return adjacentTables.some(table => table.id === tableId2);\r\n      },\r\n      \r\n      // History management\r\n      undo: () => {\r\n        const state = get();\r\n        if (!get().canUndo()) return;\r\n        \r\n        const targetIndex = state.historyIndex - 1;\r\n        const targetState = state.history[targetIndex];\r\n        \r\n        set({\r\n          tables: targetState.tables,\r\n          zones: targetState.zones,\r\n          historyIndex: targetIndex,\r\n          hasDraft: true,\r\n          layoutVersion: state.layoutVersion + 1,\r\n        });\r\n      },\r\n      \r\n      redo: () => {\r\n        const state = get();\r\n        if (!get().canRedo()) return;\r\n        \r\n        const targetIndex = state.historyIndex + 1;\r\n        const targetState = state.history[targetIndex];\r\n        \r\n        set({\r\n          tables: targetState.tables,\r\n          zones: targetState.zones,\r\n          historyIndex: targetIndex,\r\n          hasDraft: true,\r\n          layoutVersion: state.layoutVersion + 1,\r\n        });\r\n      },\r\n      \r\n      canUndo: () => {\r\n        const state = get();\r\n        return state.historyIndex > 0;\r\n      },\r\n      \r\n      canRedo: () => {\r\n        const state = get();\r\n        return state.historyIndex < state.history.length - 1;\r\n      },\r\n      \r\n      addToHistory: (action) => {\r\n        const state = get();\r\n        const historyEntry: LayoutHistory = {\r\n          timestamp: new Date().toISOString(),\r\n          tables: [...state.tables],\r\n          zones: [...state.zones],\r\n          action,\r\n        };\r\n        \r\n        // Remove any history after current index (for new branches)\r\n        const newHistory = state.history.slice(0, state.historyIndex + 1);\r\n        newHistory.push(historyEntry);\r\n        \r\n        // Limit history size\r\n        if (newHistory.length > state.maxHistoryLength) {\r\n          newHistory.shift();\r\n        }\r\n        \r\n        set({\r\n          history: newHistory,\r\n          historyIndex: newHistory.length - 1,\r\n        });\r\n      },\r\n      \r\n      // Validation\r\n      validateLayout: () => {\r\n        const errors: string[] = [];\r\n        const { tables, hasOverlaps } = get();\r\n        \r\n        // Check for overlaps\r\n        if (hasOverlaps()) {\r\n          errors.push('Tables cannot overlap');\r\n        }\r\n        \r\n        // Check for invalid capacities\r\n        const invalidCapacity = tables.find(t => t.capacity < 1);\r\n        if (invalidCapacity) {\r\n          errors.push(`Table ${invalidCapacity.id} must have capacity â‰¥ 1`);\r\n        }\r\n        \r\n        // Check for tables outside canvas\r\n        const outsideCanvas = tables.find(t => !get().isWithinCanvas(t.x, t.y, t.w, t.h));\r\n        if (outsideCanvas) {\r\n          errors.push(`Table ${outsideCanvas.id} is outside canvas bounds`);\r\n        }\r\n        \r\n        // Check for duplicate IDs (shouldn't happen, but safety check)\r\n        const ids = tables.map(t => t.id);\r\n        const duplicateIds = ids.filter((id, index) => ids.indexOf(id) !== index);\r\n        if (duplicateIds.length > 0) {\r\n          errors.push(`Duplicate table IDs found: ${duplicateIds.join(', ')}`);\r\n        }\r\n        \r\n        set({ validationErrors: errors });\r\n        return errors;\r\n      },\r\n      \r\n      hasValidationErrors: () => {\r\n        return get().validateLayout().length > 0;\r\n      },\r\n      \r\n      // Utility functions\r\n      getTableById: (id) => {\r\n        return get().tables.find((table) => table.id === id);\r\n      },\r\n      \r\n      getTablesInZone: (zoneId) => {\r\n        return get().tables.filter((table) => table.zoneId === zoneId);\r\n      },\r\n      \r\n      hasOverlap: (excludeTableId) => {\r\n        const { tables } = get();\r\n        const tablesToCheck = excludeTableId \r\n          ? tables.filter((t) => t.id !== excludeTableId)\r\n          : tables;\r\n        \r\n        for (let i = 0; i < tablesToCheck.length; i++) {\r\n          for (let j = i + 1; j < tablesToCheck.length; j++) {\r\n            const t1 = tablesToCheck[i];\r\n            const t2 = tablesToCheck[j];\r\n            \r\n            // AABB collision detection\r\n            if (\r\n              t1.x < t2.x + t2.w &&\r\n              t1.x + t1.w > t2.x &&\r\n              t1.y < t2.y + t2.h &&\r\n              t1.y + t1.h > t2.y\r\n            ) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        \r\n        return false;\r\n      },\r\n      \r\n      hasOverlaps: () => {\r\n        const { tables } = get();\r\n        \r\n        for (let i = 0; i < tables.length; i++) {\r\n          for (let j = i + 1; j < tables.length; j++) {\r\n            const t1 = tables[i];\r\n            const t2 = tables[j];\r\n            \r\n            // AABB collision detection\r\n            if (\r\n              t1.x < t2.x + t2.w &&\r\n              t1.x + t1.w > t2.x &&\r\n              t1.y < t2.y + t2.h &&\r\n              t1.y + t1.h > t2.y\r\n            ) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n        \r\n        return false;\r\n      },\r\n      \r\n      generateNextTableId: () => {\r\n        const { tables } = get();\r\n        const existingNumbers = tables\r\n          .map((t) => t.id)\r\n          .filter((id) => id.startsWith('T'))\r\n          .map((id) => parseInt(id.substring(1), 10))\r\n          .filter((n) => !isNaN(n));\r\n        \r\n        const nextNumber = existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;\r\n        return `T${nextNumber}`;\r\n      },\r\n      \r\n      snapPosition: (x, y) => {\r\n        const { gridSize } = get();\r\n        return {\r\n          x: Math.round(x / gridSize) * gridSize,\r\n          y: Math.round(y / gridSize) * gridSize,\r\n        };\r\n      },\r\n      \r\n      isWithinCanvas: (x, y, w, h) => {\r\n        const { canvasSize } = get();\r\n        return (\r\n          x >= 0 &&\r\n          y >= 0 &&\r\n          x + w <= canvasSize.width &&\r\n          y + h <= canvasSize.height\r\n        );\r\n      },\r\n      \r\n      getAdjacentTables: (tableId) => {\r\n        const table = get().getTableById(tableId);\r\n        if (!table) return [];\r\n        \r\n        const { tables } = get();\r\n        const adjacencyThreshold = 16; // 2 grid units\r\n        \r\n        return tables.filter(t => {\r\n          if (t.id === tableId) return false;\r\n          \r\n          // Check if tables are adjacent (within threshold)\r\n          const horizontallyAdjacent = (\r\n            Math.abs(t.x + t.w - table.x) <= adjacencyThreshold ||\r\n            Math.abs(table.x + table.w - t.x) <= adjacencyThreshold\r\n          ) && (\r\n            (t.y <= table.y + table.h && t.y + t.h >= table.y)\r\n          );\r\n          \r\n          const verticallyAdjacent = (\r\n            Math.abs(t.y + t.h - table.y) <= adjacencyThreshold ||\r\n            Math.abs(table.y + table.h - t.y) <= adjacencyThreshold\r\n          ) && (\r\n            (t.x <= table.x + table.w && t.x + t.w >= table.x)\r\n          );\r\n          \r\n          return horizontallyAdjacent || verticallyAdjacent;\r\n        });\r\n      },\r\n      \r\n      reset: () => {\r\n        set(initialState);\r\n      },\r\n    }),\r\n    {\r\n      name: 'table-management-store',\r\n      partialize: (state) => ({\r\n        tables: state.tables,\r\n        zones: state.zones,\r\n        hasDraft: state.hasDraft,\r\n        draftSavedAt: state.draftSavedAt,\r\n        lastActivatedAt: state.lastActivatedAt,\r\n        snapToGrid: state.snapToGrid,\r\n        gridSize: state.gridSize,\r\n        canvasSize: state.canvasSize,\r\n        layoutVersion: state.layoutVersion,\r\n        history: state.history.slice(-10), // Keep last 10 history entries\r\n        historyIndex: Math.max(0, state.historyIndex - (state.history.length - 10)),\r\n      }),\r\n    }\r\n  )\r\n);\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/ResizeHandle.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useCallback } from 'react';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ResizeHandleProps {\r\n  tableId: string;\r\n  position: 'bottom-right' | 'bottom' | 'right';\r\n  className?: string;\r\n}\r\n\r\nexport function ResizeHandle({ tableId, position, className }: ResizeHandleProps) {\r\n  const { getTableById, resizeTable, gridSize } = useTableStore();\r\n  const [isResizing, setIsResizing] = useState(false);\r\n\r\n  const table = getTableById(tableId);\r\n  if (!table) return null;\r\n\r\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsResizing(true);\r\n\r\n    const startMouseX = e.clientX;\r\n    const startMouseY = e.clientY;\r\n    const startWidth = table.w;\r\n    const startHeight = table.h;\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const deltaX = e.clientX - startMouseX;\r\n      const deltaY = e.clientY - startMouseY;\r\n\r\n      let newWidth = startWidth;\r\n      let newHeight = startHeight;\r\n\r\n      switch (position) {\r\n        case 'bottom-right':\r\n          newWidth = Math.max(gridSize * 4, startWidth + deltaX);\r\n          newHeight = Math.max(gridSize * 4, startHeight + deltaY);\r\n          break;\r\n        case 'bottom':\r\n          newHeight = Math.max(gridSize * 4, startHeight + deltaY);\r\n          break;\r\n        case 'right':\r\n          newWidth = Math.max(gridSize * 4, startWidth + deltaX);\r\n          break;\r\n      }\r\n\r\n      resizeTable(tableId, newWidth, newHeight);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n      setIsResizing(false);\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      document.removeEventListener('mouseup', handleMouseUp);\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    document.addEventListener('mouseup', handleMouseUp);\r\n  }, [tableId, position, table.w, table.h, resizeTable, gridSize]);\r\n\r\n  const getCursor = () => {\r\n    switch (position) {\r\n      case 'bottom-right':\r\n        return 'cursor-nw-resize';\r\n      case 'bottom':\r\n        return 'cursor-ns-resize';\r\n      case 'right':\r\n        return 'cursor-ew-resize';\r\n      default:\r\n        return 'cursor-pointer';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'w-3 h-3 bg-blue-500 border border-white rounded-sm hover:bg-blue-600 transition-colors z-20',\r\n        getCursor(),\r\n        isResizing && 'bg-blue-600 scale-110',\r\n        className\r\n      )}\r\n      onMouseDown={handleMouseDown}\r\n    />\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAYO,SAAS,aAAa,KAAmD;QAAnD,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAqB,GAAnD;;IAC3B,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,IAAA,sJAAa;IAC7D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,QAAQ,aAAa;IAC3B,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,kBAAkB,IAAA,4KAAW;qDAAC,CAAC;YACnC,EAAE,cAAc;YAChB,EAAE,eAAe;YACjB,cAAc;YAEd,MAAM,cAAc,EAAE,OAAO;YAC7B,MAAM,cAAc,EAAE,OAAO;YAC7B,MAAM,aAAa,MAAM,CAAC;YAC1B,MAAM,cAAc,MAAM,CAAC;YAE3B,MAAM;6EAAkB,CAAC;oBACvB,MAAM,SAAS,EAAE,OAAO,GAAG;oBAC3B,MAAM,SAAS,EAAE,OAAO,GAAG;oBAE3B,IAAI,WAAW;oBACf,IAAI,YAAY;oBAEhB,OAAQ;wBACN,KAAK;4BACH,WAAW,KAAK,GAAG,CAAC,WAAW,GAAG,aAAa;4BAC/C,YAAY,KAAK,GAAG,CAAC,WAAW,GAAG,cAAc;4BACjD;wBACF,KAAK;4BACH,YAAY,KAAK,GAAG,CAAC,WAAW,GAAG,cAAc;4BACjD;wBACF,KAAK;4BACH,WAAW,KAAK,GAAG,CAAC,WAAW,GAAG,aAAa;4BAC/C;oBACJ;oBAEA,YAAY,SAAS,UAAU;gBACjC;;YAEA,MAAM;2EAAgB;oBACpB,cAAc;oBACd,SAAS,mBAAmB,CAAC,aAAa;oBAC1C,SAAS,mBAAmB,CAAC,WAAW;gBAC1C;;YAEA,SAAS,gBAAgB,CAAC,aAAa;YACvC,SAAS,gBAAgB,CAAC,WAAW;QACvC;oDAAG;QAAC;QAAS;QAAU,MAAM,CAAC;QAAE,MAAM,CAAC;QAAE;QAAa;KAAS;IAE/D,MAAM,YAAY;QAChB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,+FACA,aACA,cAAc,yBACd;QAEF,aAAa;;;;;;AAGnB;GA1EgB;;QACkC,sJAAa;;;KAD/C","debugId":null}},
    {"offset": {"line": 4237, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/TableLabel.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface TableLabelProps {\r\n  tableId: string;\r\n  className?: string;\r\n}\r\n\r\nexport function TableLabel({ tableId, className }: TableLabelProps) {\r\n  const { getTableById } = useTableStore();\r\n  const table = getTableById(tableId);\r\n\r\n  if (!table) return null;\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'text-center text-sm font-medium text-gray-700 pointer-events-none select-none',\r\n        'flex flex-col items-center justify-center gap-1',\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"font-semibold text-xs\">\r\n        {table.label}\r\n      </div>\r\n      <div className=\"text-xs text-gray-500\">\r\n        Seats: {table.seats}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;AAWO,SAAS,WAAW,KAAuC;QAAvC,EAAE,OAAO,EAAE,SAAS,EAAmB,GAAvC;;IACzB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,sJAAa;IACtC,MAAM,QAAQ,aAAa;IAE3B,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,iFACA,mDACA;;0BAGF,6LAAC;gBAAI,WAAU;0BACZ,MAAM,KAAK;;;;;;0BAEd,6LAAC;gBAAI,WAAU;;oBAAwB;oBAC7B,MAAM,KAAK;;;;;;;;;;;;;AAI3B;GAtBgB;;QACW,sJAAa;;;KADxB","debugId":null}},
    {"offset": {"line": 4299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/TableStatusBadge.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { cn } from '@/lib/utils';\r\nimport { TableState } from '@/lib/stores/tableStore';\r\n\r\ninterface TableStatusBadgeProps {\r\n  status: TableState['status'];\r\n  className?: string;\r\n}\r\n\r\nexport function TableStatusBadge({ status, className }: TableStatusBadgeProps) {\r\n  const getStatusInfo = (status: TableState['status']) => {\r\n    switch (status) {\r\n      case 'FREE':\r\n        return {\r\n          label: 'Available',\r\n          variant: 'default' as const,\r\n          className: 'bg-green-100 text-green-800 border-green-300 hover:bg-green-200'\r\n        };\r\n      case 'SEATED':\r\n        return {\r\n          label: 'Occupied',\r\n          variant: 'destructive' as const,\r\n          className: 'bg-red-100 text-red-800 border-red-300 hover:bg-red-200'\r\n        };\r\n      case 'RESERVED':\r\n        return {\r\n          label: 'Reserved',\r\n          variant: 'secondary' as const,\r\n          className: 'bg-blue-100 text-blue-800 border-blue-300 hover:bg-blue-200'\r\n        };\r\n      case 'DIRTY':\r\n        return {\r\n          label: 'Dirty',\r\n          variant: 'outline' as const,\r\n          className: 'bg-orange-100 text-orange-800 border-orange-300 hover:bg-orange-200'\r\n        };\r\n      default:\r\n        return {\r\n          label: 'Unknown',\r\n          variant: 'outline' as const,\r\n          className: 'bg-gray-100 text-gray-800 border-gray-300'\r\n        };\r\n    }\r\n  };\r\n\r\n  const statusInfo = getStatusInfo(status);\r\n\r\n  return (\r\n    <Badge \r\n      variant={statusInfo.variant}\r\n      className={cn(\r\n        'text-xs font-medium px-2 py-1 absolute top-1 right-1 z-10',\r\n        statusInfo.className,\r\n        className\r\n      )}\r\n    >\r\n      {statusInfo.label}\r\n    </Badge>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAYO,SAAS,iBAAiB,KAA4C;QAA5C,EAAE,MAAM,EAAE,SAAS,EAAyB,GAA5C;IAC/B,MAAM,gBAAgB,CAAC;QACrB,OAAQ;YACN,KAAK;gBACH,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,WAAW;gBACb;YACF,KAAK;gBACH,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,WAAW;gBACb;YACF;gBACE,OAAO;oBACL,OAAO;oBACP,SAAS;oBACT,WAAW;gBACb;QACJ;IACF;IAEA,MAAM,aAAa,cAAc;IAEjC,qBACE,6LAAC,6IAAK;QACJ,SAAS,WAAW,OAAO;QAC3B,WAAW,IAAA,4HAAE,EACX,6DACA,WAAW,SAAS,EACpB;kBAGD,WAAW,KAAK;;;;;;AAGvB;KAlDgB","debugId":null}},
    {"offset": {"line": 4367, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/TableNode.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useTableStore, type Table as TableNodeType } from '@/contexts/tableStore';\r\nimport { ResizeHandle } from './ResizeHandle';\r\nimport { TableLabel } from './TableLabel';\r\nimport { TableStatusBadge } from './TableStatusBadge';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface TableNodeProps {\r\n  table: TableNodeType;\r\n  isSelected: boolean;\r\n  isDragging: boolean;\r\n  onMouseDown: (e: React.MouseEvent) => void;\r\n  onClick: () => void;\r\n}\r\n\r\nexport function TableNode({ \r\n  table, \r\n  isSelected, \r\n  isDragging, \r\n  onMouseDown, \r\n  onClick \r\n}: TableNodeProps) {\r\n  const { hasOverlap, tableStates } = useTableStore();\r\n  \r\n  const tableStatus = tableStates[table.id]?.status || 'FREE';\r\n  const isOverlapping = hasOverlap(table.id);\r\n\r\n  // Get shape-specific styles\r\n  const getShapeStyles = () => {\r\n    const baseStyles = {\r\n      width: table.w,\r\n      height: table.h,\r\n      left: table.x,\r\n      top: table.y,\r\n    };\r\n\r\n    switch (table.shape) {\r\n      case 'round':\r\n        return {\r\n          ...baseStyles,\r\n          borderRadius: '50%',\r\n        };\r\n      case 'square':\r\n        return {\r\n          ...baseStyles,\r\n          borderRadius: '8px',\r\n        };\r\n      case 'rect':\r\n        return {\r\n          ...baseStyles,\r\n          borderRadius: '12px',\r\n        };\r\n      default:\r\n        return {\r\n          ...baseStyles,\r\n          borderRadius: '8px',\r\n        };\r\n    }\r\n  };\r\n\r\n  // Get status color\r\n  const getStatusColor = () => {\r\n    switch (tableStatus) {\r\n      case 'FREE':\r\n        return 'bg-green-100 border-green-300 hover:bg-green-200';\r\n      case 'SEATED':\r\n        return 'bg-blue-100 border-blue-300 hover:bg-blue-200';\r\n      case 'DIRTY':\r\n        return 'bg-gray-100 border-gray-300 hover:bg-gray-200';\r\n      case 'RESERVED':\r\n        return 'bg-yellow-100 border-yellow-300 hover:bg-yellow-200';\r\n      default:\r\n        return 'bg-white border-gray-300 hover:bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const shapeStyles = getShapeStyles();\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        'absolute cursor-pointer border-2 transition-all duration-150 flex items-center justify-center text-sm font-semibold',\r\n        getStatusColor(),\r\n        isSelected && 'ring-2 ring-blue-500 ring-offset-2 z-10',\r\n        isDragging && 'opacity-75 z-20',\r\n        isOverlapping && 'border-red-500 bg-red-100 animate-pulse'\r\n      )}\r\n      style={shapeStyles}\r\n      onMouseDown={onMouseDown}\r\n      onClick={(e) => {\r\n        e.stopPropagation();\r\n        onClick();\r\n      }}\r\n    >\r\n      {/* Table Label */}\r\n      <TableLabel tableId={table.id} />\r\n      \r\n      {/* Status Badge */}\r\n      <TableStatusBadge \r\n        status={tableStatus} \r\n        className=\"absolute -top-2 -right-2\"\r\n      />\r\n      \r\n      {/* Resize Handles - only show when selected */}\r\n      {isSelected && (\r\n        <>\r\n          <ResizeHandle \r\n            tableId={table.id}\r\n            position=\"bottom-right\"\r\n            className=\"absolute -bottom-1 -right-1\"\r\n          />\r\n          <ResizeHandle \r\n            tableId={table.id}\r\n            position=\"bottom\"\r\n            className=\"absolute -bottom-1 left-1/2 transform -translate-x-1/2\"\r\n          />\r\n          <ResizeHandle \r\n            tableId={table.id}\r\n            position=\"right\"\r\n            className=\"absolute -right-1 top-1/2 transform -translate-y-1/2\"\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* Zone indicator */}\r\n      {table.zoneId && (\r\n        <div className=\"absolute -top-1 -left-1 w-3 h-3 rounded-full border-2 border-white\"\r\n             style={{ backgroundColor: 'var(--zone-color, #3B82F6)' }} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;AAiBO,SAAS,UAAU,KAMT;QANS,EACxB,KAAK,EACL,UAAU,EACV,UAAU,EACV,WAAW,EACX,OAAO,EACQ,GANS;QASJ;;IAFpB,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,IAAA,iJAAa;IAEjD,MAAM,cAAc,EAAA,wBAAA,WAAW,CAAC,MAAM,EAAE,CAAC,cAArB,4CAAA,sBAAuB,MAAM,KAAI;IACrD,MAAM,gBAAgB,WAAW,MAAM,EAAE;IAEzC,4BAA4B;IAC5B,MAAM,iBAAiB;QACrB,MAAM,aAAa;YACjB,OAAO,MAAM,CAAC;YACd,QAAQ,MAAM,CAAC;YACf,MAAM,MAAM,CAAC;YACb,KAAK,MAAM,CAAC;QACd;QAEA,OAAQ,MAAM,KAAK;YACjB,KAAK;gBACH,OAAO;oBACL,GAAG,UAAU;oBACb,cAAc;gBAChB;YACF,KAAK;gBACH,OAAO;oBACL,GAAG,UAAU;oBACb,cAAc;gBAChB;YACF,KAAK;gBACH,OAAO;oBACL,GAAG,UAAU;oBACb,cAAc;gBAChB;YACF;gBACE,OAAO;oBACL,GAAG,UAAU;oBACb,cAAc;gBAChB;QACJ;IACF;IAEA,mBAAmB;IACnB,MAAM,iBAAiB;QACrB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,cAAc;IAEpB,qBACE,6LAAC;QACC,WAAW,IAAA,4HAAE,EACX,uHACA,kBACA,cAAc,2CACd,cAAc,mBACd,iBAAiB;QAEnB,OAAO;QACP,aAAa;QACb,SAAS,CAAC;YACR,EAAE,eAAe;YACjB;QACF;;0BAGA,6LAAC,wKAAU;gBAAC,SAAS,MAAM,EAAE;;;;;;0BAG7B,6LAAC,oLAAgB;gBACf,QAAQ;gBACR,WAAU;;;;;;YAIX,4BACC;;kCACE,6LAAC,4KAAY;wBACX,SAAS,MAAM,EAAE;wBACjB,UAAS;wBACT,WAAU;;;;;;kCAEZ,6LAAC,4KAAY;wBACX,SAAS,MAAM,EAAE;wBACjB,UAAS;wBACT,WAAU;;;;;;kCAEZ,6LAAC,4KAAY;wBACX,SAAS,MAAM,EAAE;wBACjB,UAAS;wBACT,WAAU;;;;;;;;YAMf,MAAM,MAAM,kBACX,6LAAC;gBAAI,WAAU;gBACV,OAAO;oBAAE,iBAAiB;gBAA6B;;;;;;;;;;;;AAIpE;GApHgB;;QAOsB,iJAAa;;;KAPnC","debugId":null}},
    {"offset": {"line": 4526, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/GridLayer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useTableStore } from '@/contexts/tableStore';\r\n\r\nexport function GridLayer() {\r\n  const { canvasSize, gridSize, snapToGrid } = useTableStore();\r\n\r\n  if (!snapToGrid) return null;\r\n\r\n  const horizontalLines = Math.floor(canvasSize.height / gridSize);\r\n  const verticalLines = Math.floor(canvasSize.width / gridSize);\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 pointer-events-none opacity-20\">\r\n      {/* Horizontal lines */}\r\n      {Array.from({ length: horizontalLines + 1 }, (_, i) => (\r\n        <div\r\n          key={`h-${i}`}\r\n          className=\"absolute w-full border-t border-gray-300\"\r\n          style={{ top: i * gridSize }}\r\n        />\r\n      ))}\r\n      \r\n      {/* Vertical lines */}\r\n      {Array.from({ length: verticalLines + 1 }, (_, i) => (\r\n        <div\r\n          key={`v-${i}`}\r\n          className=\"absolute h-full border-l border-gray-300\"\r\n          style={{ left: i * gridSize }}\r\n        />\r\n      ))}\r\n      \r\n      {/* Grid dots at intersections */}\r\n      {Array.from({ length: horizontalLines + 1 }, (_, i) =>\r\n        Array.from({ length: verticalLines + 1 }, (_, j) => (\r\n          <div\r\n            key={`dot-${i}-${j}`}\r\n            className=\"absolute w-1 h-1 bg-gray-400 rounded-full transform -translate-x-0.5 -translate-y-0.5\"\r\n            style={{\r\n              top: i * gridSize,\r\n              left: j * gridSize,\r\n            }}\r\n          />\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAKO,SAAS;;IACd,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,IAAA,iJAAa;IAE1D,IAAI,CAAC,YAAY,OAAO;IAExB,MAAM,kBAAkB,KAAK,KAAK,CAAC,WAAW,MAAM,GAAG;IACvD,MAAM,gBAAgB,KAAK,KAAK,CAAC,WAAW,KAAK,GAAG;IAEpD,qBACE,6LAAC;QAAI,WAAU;;YAEZ,MAAM,IAAI,CAAC;gBAAE,QAAQ,kBAAkB;YAAE,GAAG,CAAC,GAAG,kBAC/C,6LAAC;oBAEC,WAAU;oBACV,OAAO;wBAAE,KAAK,IAAI;oBAAS;mBAFtB,AAAC,KAAM,OAAF;;;;;YAOb,MAAM,IAAI,CAAC;gBAAE,QAAQ,gBAAgB;YAAE,GAAG,CAAC,GAAG,kBAC7C,6LAAC;oBAEC,WAAU;oBACV,OAAO;wBAAE,MAAM,IAAI;oBAAS;mBAFvB,AAAC,KAAM,OAAF;;;;;YAOb,MAAM,IAAI,CAAC;gBAAE,QAAQ,kBAAkB;YAAE,GAAG,CAAC,GAAG,IAC/C,MAAM,IAAI,CAAC;oBAAE,QAAQ,gBAAgB;gBAAE,GAAG,CAAC,GAAG,kBAC5C,6LAAC;wBAEC,WAAU;wBACV,OAAO;4BACL,KAAK,IAAI;4BACT,MAAM,IAAI;wBACZ;uBALK,AAAC,OAAW,OAAL,GAAE,KAAK,OAAF;;;;;;;;;;;AAW7B;GA3CgB;;QAC+B,iJAAa;;;KAD5C","debugId":null}},
    {"offset": {"line": 4606, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/DragController.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useTableStore } from '@/contexts/tableStore';\r\n\r\nexport function DragController() {\r\n  const { isDragging, selectedTable } = useTableStore();\r\n\r\n  if (!isDragging || !selectedTable) return null;\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 pointer-events-none\">\r\n      {/* Drag guidelines */}\r\n      <div \r\n        className=\"absolute border-l-2 border-dashed border-blue-400 opacity-60\"\r\n        style={{\r\n          left: selectedTable.x + selectedTable.w / 2,\r\n          top: 0,\r\n          height: '100%',\r\n        }}\r\n      />\r\n      <div \r\n        className=\"absolute border-t-2 border-dashed border-blue-400 opacity-60\"\r\n        style={{\r\n          top: selectedTable.y + selectedTable.h / 2,\r\n          left: 0,\r\n          width: '100%',\r\n        }}\r\n      />\r\n      \r\n      {/* Position indicator */}\r\n      <div\r\n        className=\"absolute bg-blue-500 text-white text-xs px-2 py-1 rounded shadow-lg\"\r\n        style={{\r\n          left: selectedTable.x + selectedTable.w + 10,\r\n          top: selectedTable.y,\r\n        }}\r\n      >\r\n        {selectedTable.x}, {selectedTable.y}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;;;AAHA;;AAKO,SAAS;;IACd,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,IAAA,iJAAa;IAEnD,IAAI,CAAC,cAAc,CAAC,eAAe,OAAO;IAE1C,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBACC,WAAU;gBACV,OAAO;oBACL,MAAM,cAAc,CAAC,GAAG,cAAc,CAAC,GAAG;oBAC1C,KAAK;oBACL,QAAQ;gBACV;;;;;;0BAEF,6LAAC;gBACC,WAAU;gBACV,OAAO;oBACL,KAAK,cAAc,CAAC,GAAG,cAAc,CAAC,GAAG;oBACzC,MAAM;oBACN,OAAO;gBACT;;;;;;0BAIF,6LAAC;gBACC,WAAU;gBACV,OAAO;oBACL,MAAM,cAAc,CAAC,GAAG,cAAc,CAAC,GAAG;oBAC1C,KAAK,cAAc,CAAC;gBACtB;;oBAEC,cAAc,CAAC;oBAAC;oBAAG,cAAc,CAAC;;;;;;;;;;;;;AAI3C;GArCgB;;QACwB,iJAAa;;;KADrC","debugId":null}},
    {"offset": {"line": 4685, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/FloorEditorCanvas.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\r\nimport { useTableStore } from '@/contexts/tableStore';\r\nimport { TableNode } from '@/components/table-management/TableNode';\r\nimport { GridLayer } from '@/components/table-management/GridLayer';\r\nimport { DragController } from '@/components/table-management/DragController';\r\n\r\nexport function FloorEditorCanvas() {\r\n  const canvasRef = useRef<HTMLDivElement>(null);\r\n  const {\r\n    tables,\r\n    zones,\r\n    selectedTable,\r\n    selectTable,\r\n    moveTable,\r\n    canvasSize,\r\n    gridSize,\r\n    snapToGrid,\r\n  } = useTableStore();\r\n\r\n  const [dragState, setDragState] = useState<{\r\n    isDragging: boolean;\r\n    tableId: string | null;\r\n    startPos: { x: number; y: number };\r\n    offset: { x: number; y: number };\r\n  }>({\r\n    isDragging: false,\r\n    tableId: null,\r\n    startPos: { x: 0, y: 0 },\r\n    offset: { x: 0, y: 0 },\r\n  });\r\n\r\n  // Handle keyboard navigation\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (!selectedTable) return;\r\n\r\n      const step = snapToGrid ? gridSize : 1;\r\n      let newX = selectedTable.x;\r\n      let newY = selectedTable.y;\r\n\r\n      switch (e.key) {\r\n        case 'ArrowLeft':\r\n          e.preventDefault();\r\n          newX = Math.max(0, selectedTable.x - step);\r\n          break;\r\n        case 'ArrowRight':\r\n          e.preventDefault();\r\n          newX = Math.min(canvasSize.width - selectedTable.w, selectedTable.x + step);\r\n          break;\r\n        case 'ArrowUp':\r\n          e.preventDefault();\r\n          newY = Math.max(0, selectedTable.y - step);\r\n          break;\r\n        case 'ArrowDown':\r\n          e.preventDefault();\r\n          newY = Math.min(canvasSize.height - selectedTable.h, selectedTable.y + step);\r\n          break;\r\n        case 'Escape':\r\n          e.preventDefault();\r\n          selectTable(null);\r\n          break;\r\n        default:\r\n          return;\r\n      }\r\n\r\n      if (newX !== selectedTable.x || newY !== selectedTable.y) {\r\n        moveTable(selectedTable.id, newX, newY);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [selectedTable, moveTable, selectTable, snapToGrid, gridSize, canvasSize]);\r\n\r\n  // Handle mouse events for dragging\r\n  const handleMouseDown = useCallback((e: React.MouseEvent, tableId: string) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    const table = tables.find(t => t.id === tableId);\r\n    if (!table) return;\r\n\r\n    const rect = canvasRef.current?.getBoundingClientRect();\r\n    if (!rect) return;\r\n\r\n    const mouseX = e.clientX - rect.left;\r\n    const mouseY = e.clientY - rect.top;\r\n\r\n    setDragState({\r\n      isDragging: true,\r\n      tableId,\r\n      startPos: { x: mouseX, y: mouseY },\r\n      offset: {\r\n        x: mouseX - table.x,\r\n        y: mouseY - table.y,\r\n      },\r\n    });\r\n\r\n    selectTable(tableId);\r\n  }, [tables, selectTable]);\r\n\r\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\r\n    if (!dragState.isDragging || !dragState.tableId) return;\r\n\r\n    const rect = canvasRef.current?.getBoundingClientRect();\r\n    if (!rect) return;\r\n\r\n    const mouseX = e.clientX - rect.left;\r\n    const mouseY = e.clientY - rect.top;\r\n\r\n    const newX = Math.max(0, Math.min(\r\n      canvasSize.width - (tables.find(t => t.id === dragState.tableId)?.w || 0),\r\n      mouseX - dragState.offset.x\r\n    ));\r\n    const newY = Math.max(0, Math.min(\r\n      canvasSize.height - (tables.find(t => t.id === dragState.tableId)?.h || 0),\r\n      mouseY - dragState.offset.y\r\n    ));\r\n\r\n    moveTable(dragState.tableId, newX, newY);\r\n  }, [dragState, moveTable, tables, canvasSize]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setDragState({\r\n      isDragging: false,\r\n      tableId: null,\r\n      startPos: { x: 0, y: 0 },\r\n      offset: { x: 0, y: 0 },\r\n    });\r\n  }, []);\r\n\r\n  // Handle canvas click (deselect table)\r\n  const handleCanvasClick = useCallback((e: React.MouseEvent) => {\r\n    if (e.target === e.currentTarget) {\r\n      selectTable(null);\r\n    }\r\n  }, [selectTable]);\r\n\r\n  return (\r\n    <div className=\"relative bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg overflow-hidden\">\r\n      <div\r\n        ref={canvasRef}\r\n        className=\"relative cursor-crosshair\"\r\n        style={{\r\n          width: canvasSize.width,\r\n          height: canvasSize.height,\r\n          backgroundImage: snapToGrid \r\n            ? `radial-gradient(circle, #cbd5e1 1px, transparent 1px)`\r\n            : 'none',\r\n          backgroundSize: snapToGrid ? `${gridSize}px ${gridSize}px` : 'auto',\r\n        }}\r\n        onClick={handleCanvasClick}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onMouseLeave={handleMouseUp}\r\n      >\r\n        {/* Grid Layer */}\r\n        <GridLayer />\r\n\r\n        {/* Zone indicators */}\r\n        {zones\r\n          .filter(zone => zone.visible)\r\n          .map(zone => {\r\n            const tablesInZone = tables.filter(t => t.zoneId === zone.id);\r\n            if (tablesInZone.length === 0) return null;\r\n\r\n            // Calculate zone bounds\r\n            const minX = Math.min(...tablesInZone.map(t => t.x));\r\n            const minY = Math.min(...tablesInZone.map(t => t.y));\r\n            const maxX = Math.max(...tablesInZone.map(t => t.x + t.w));\r\n            const maxY = Math.max(...tablesInZone.map(t => t.y + t.h));\r\n\r\n            return (\r\n              <div\r\n                key={zone.id}\r\n                className=\"absolute pointer-events-none border-2 border-dashed rounded-lg\"\r\n                style={{\r\n                  left: minX - 10,\r\n                  top: minY - 30,\r\n                  width: maxX - minX + 20,\r\n                  height: maxY - minY + 40,\r\n                  borderColor: zone.color,\r\n                  backgroundColor: `${zone.color}10`,\r\n                }}\r\n              >\r\n                <div\r\n                  className=\"absolute -top-6 left-2 px-2 py-1 rounded text-xs font-semibold\"\r\n                  style={{\r\n                    backgroundColor: zone.color,\r\n                    color: 'white',\r\n                  }}\r\n                >\r\n                  {zone.name}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n        {/* Tables */}\r\n        {tables.map((table) => (\r\n          <TableNode\r\n            key={table.id}\r\n            table={table}\r\n            isSelected={selectedTable?.id === table.id}\r\n            isDragging={dragState.isDragging && dragState.tableId === table.id}\r\n            onMouseDown={(e) => handleMouseDown(e, table.id)}\r\n            onClick={() => selectTable(table.id)}\r\n          />\r\n        ))}\r\n\r\n        {/* Drag Controller */}\r\n        <DragController />\r\n      </div>\r\n      \r\n      {/* Canvas info */}\r\n      <div className=\"absolute bottom-2 right-2 text-xs text-gray-500 bg-white px-2 py-1 rounded shadow\">\r\n        {tables.length} tables â€¢ {canvasSize.width}Ã—{canvasSize.height}px\r\n        {snapToGrid && ` â€¢ Grid: ${gridSize}px`}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4968, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input } "],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,2KAAgB,MAC5B,QAAgC;QAA/B,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO;IAC5B,qBACE,6LAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 5004, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label } "],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,IAAA,0KAAG,EACvB;AAGF,MAAM,sBAAQ,2KAAgB,MAI5B,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,4KAAmB;QAClB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,iBAAiB;QAC9B,GAAG,KAAK;;;;;;;;AAGb,MAAM,WAAW,GAAG,4KAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 5045, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,kUACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;;MAZnB;AAeN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;;MAZrB;AAeN,uBAAuB,WAAW,GAChC,yLAAgC,CAAC,WAAW;AAE9C,MAAM,8BAAgB,2KAAgB,OAGpC,QAAyD;QAAxD,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO;yBACvD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,WAAW,IAAA,4HAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,4HAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,QAAoC;QAAnC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;yBAClC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,4HAAE,EACX,6NACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,QAA0B;QAAzB,EAAE,SAAS,EAAE,GAAG,OAAO;yBACxB,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,4HAAE,EAAC,4BAA4B;QACzC,GAAG,KAAK;;;;;;;;AAGb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 5289, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/TablePropertiesPanel.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Trash2, Users, Move, Square } from 'lucide-react';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface TablePropertiesPanelProps {\r\n  className?: string;\r\n}\r\n\r\nexport function TablePropertiesPanel({ className }: TablePropertiesPanelProps) {\r\n  const { \r\n    selectedTable, \r\n    tables, \r\n    zones,\r\n    getTableById,\r\n    updateTable,\r\n    deleteTable,\r\n    clearSelection,\r\n    addZone,\r\n    updateZone,\r\n    removeZone\r\n  } = useTableStore();\r\n\r\n  const table = selectedTable ? getTableById(selectedTable) : null;\r\n\r\n  if (!table) {\r\n    return (\r\n      <Card className={cn('w-80 h-fit', className)}>\r\n        <CardHeader className=\"pb-3\">\r\n          <CardTitle className=\"text-sm font-medium text-gray-600\">Table Properties</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"text-sm text-gray-500 text-center py-8\">\r\n          Select a table to view and edit properties\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const handleLabelChange = (value: string) => {\r\n    updateTable(table.id, { label: value });\r\n  };\r\n\r\n  const handleCapacityChange = (value: string) => {\r\n    const capacity = parseInt(value);\r\n    if (capacity > 0) {\r\n      updateTable(table.id, { capacity, seats: capacity });\r\n    }\r\n  };\r\n\r\n  const handleShapeChange = (shape: 'round' | 'square' | 'rect') => {\r\n    updateTable(table.id, { shape });\r\n  };\r\n\r\n  const handleZoneChange = (zoneId: string) => {\r\n    updateTable(table.id, { zoneId: zoneId === 'none' ? undefined : zoneId });\r\n  };\r\n\r\n  const handleDeleteTable = () => {\r\n    if (table) {\r\n      deleteTable(table.id);\r\n      clearSelection();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card className={cn('w-80 h-fit', className)}>\r\n      <CardHeader className=\"pb-3\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <CardTitle className=\"text-sm font-medium text-gray-700\">Table Properties</CardTitle>\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"sm\" \r\n            onClick={clearSelection}\r\n            className=\"h-6 w-6 p-0\"\r\n          >\r\n            âœ•\r\n          </Button>\r\n        </div>\r\n      </CardHeader>\r\n      <CardContent className=\"space-y-4\">\r\n        {/* Table Label */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"table-label\" className=\"text-xs font-medium\">Table Label</Label>\r\n          <Input\r\n            id=\"table-label\"\r\n            value={table.label || ''}\r\n            onChange={(e) => handleLabelChange(e.target.value)}\r\n            placeholder=\"Enter table label\"\r\n            className=\"h-8 text-sm\"\r\n          />\r\n        </div>\r\n\r\n        {/* Capacity */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"table-capacity\" className=\"text-xs font-medium\">Capacity (Seats)</Label>\r\n          <Input\r\n            id=\"table-capacity\"\r\n            type=\"number\"\r\n            min=\"1\"\r\n            max=\"20\"\r\n            value={table.capacity || table.seats || 4}\r\n            onChange={(e) => handleCapacityChange(e.target.value)}\r\n            className=\"h-8 text-sm\"\r\n          />\r\n        </div>\r\n\r\n        {/* Shape */}\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-xs font-medium\">Table Shape</Label>\r\n          <div className=\"flex gap-2\">\r\n            {[\r\n              { shape: 'round' as const, icon: 'â—', label: 'Round' },\r\n              { shape: 'square' as const, icon: 'â– ', label: 'Square' },\r\n              { shape: 'rect' as const, icon: 'â–¬', label: 'Rectangle' }\r\n            ].map(({ shape, icon, label }) => (\r\n              <Button\r\n                key={shape}\r\n                variant={table.shape === shape ? 'default' : 'outline'}\r\n                size=\"sm\"\r\n                onClick={() => handleShapeChange(shape)}\r\n                className=\"flex-1 h-8 text-xs\"\r\n              >\r\n                <span className=\"mr-1\">{icon}</span>\r\n                {label}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Zone Assignment */}\r\n        <div className=\"space-y-2\">\r\n          <Label htmlFor=\"table-zone\" className=\"text-xs font-medium\">Zone</Label>\r\n          <Select \r\n            value={table.zoneId || 'none'} \r\n            onValueChange={handleZoneChange}\r\n          >\r\n            <SelectTrigger className=\"h-8 text-sm\">\r\n              <SelectValue placeholder=\"Select zone\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"none\">No Zone</SelectItem>\r\n              {zones.map((zone: any) => (\r\n                <SelectItem key={zone.id} value={zone.id}>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div \r\n                      className=\"w-3 h-3 rounded-full border\" \r\n                      style={{ backgroundColor: zone.color }}\r\n                    />\r\n                    {zone.name}\r\n                  </div>\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {/* Position & Size Info */}\r\n        <div className=\"space-y-2\">\r\n          <Label className=\"text-xs font-medium\">Position & Size</Label>\r\n          <div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n            <div className=\"flex items-center gap-1\">\r\n              <Move className=\"w-3 h-3\" />\r\n              <span>X: {table.x}px</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Move className=\"w-3 h-3\" />\r\n              <span>Y: {table.y}px</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Square className=\"w-3 h-3\" />\r\n              <span>W: {table.w}px</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <Square className=\"w-3 h-3\" />\r\n              <span>H: {table.h}px</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Current Zone Badge */}\r\n        {table.zoneId && (\r\n          <div className=\"space-y-2\">\r\n            <Label className=\"text-xs font-medium\">Current Zone</Label>\r\n            {(() => {\r\n              const zone = zones.find((z: any) => z.id === table.zoneId);\r\n              return zone ? (\r\n                <Badge variant=\"outline\" className=\"text-xs\">\r\n                  <div \r\n                    className=\"w-2 h-2 rounded-full mr-2\" \r\n                    style={{ backgroundColor: zone.color }}\r\n                  />\r\n                  {zone.name}\r\n                </Badge>\r\n              ) : null;\r\n            })()}\r\n          </div>\r\n        )}\r\n\r\n        {/* Actions */}\r\n        <div className=\"pt-4 border-t\">\r\n          <Button \r\n            variant=\"destructive\" \r\n            size=\"sm\" \r\n            onClick={handleDeleteTable}\r\n            className=\"w-full h-8 text-xs\"\r\n          >\r\n            <Trash2 className=\"w-3 h-3 mr-2\" />\r\n            Delete Table\r\n          </Button>\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5866, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/SaveDraftButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Save, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface SaveDraftButtonProps {\r\n  className?: string;\r\n}\r\n\r\nexport function SaveDraftButton({ className }: SaveDraftButtonProps) {\r\n  const { tables, zones, hasOverlaps } = useTableStore();\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'success' | 'error'>('idle');\r\n\r\n  const handleSaveDraft = async () => {\r\n    if (isSaving) return;\r\n    \r\n    setIsSaving(true);\r\n    setSaveStatus('idle');\r\n\r\n    try {\r\n      // Validate layout before saving\r\n      if (tables.length === 0) {\r\n        throw new Error('Layout must contain at least one table');\r\n      }\r\n\r\n      if (hasOverlaps()) {\r\n        throw new Error('Cannot save layout with overlapping tables');\r\n      }\r\n\r\n      // Prepare layout data\r\n      const layoutData = {\r\n        tables,\r\n        zones,\r\n        metadata: {\r\n          version: '1.0',\r\n          lastModified: new Date().toISOString(),\r\n          tableCount: tables.length,\r\n          zoneCount: zones.length,\r\n        }\r\n      };\r\n\r\n      // Save to API\r\n      const response = await fetch('/api/pos/floor/layout/draft', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-tenant-id': 'default', // TODO: Get from auth context\r\n        },\r\n        body: JSON.stringify(layoutData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to save draft');\r\n      }\r\n\r\n      setSaveStatus('success');\r\n      \r\n      // Auto-clear success status after 3 seconds\r\n      setTimeout(() => {\r\n        setSaveStatus('idle');\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error('Error saving draft:', error);\r\n      setSaveStatus('error');\r\n      \r\n      // Auto-clear error status after 5 seconds\r\n      setTimeout(() => {\r\n        setSaveStatus('idle');\r\n      }, 5000);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const getButtonContent = () => {\r\n    switch (saveStatus) {\r\n      case 'success':\r\n        return (\r\n          <>\r\n            <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n            Draft Saved\r\n          </>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <>\r\n            <AlertCircle className=\"w-4 h-4 mr-2\" />\r\n            Save Failed\r\n          </>\r\n        );\r\n      default:\r\n        return (\r\n          <>\r\n            <Save className=\"w-4 h-4 mr-2\" />\r\n            {isSaving ? 'Saving...' : 'Save Draft'}\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  const getButtonVariant = () => {\r\n    switch (saveStatus) {\r\n      case 'success':\r\n        return 'default';\r\n      case 'error':\r\n        return 'destructive';\r\n      default:\r\n        return 'outline';\r\n    }\r\n  };\r\n\r\n  const isDisabled = isSaving || tables.length === 0 || hasOverlaps();\r\n\r\n  return (\r\n    <Button\r\n      variant={getButtonVariant()}\r\n      onClick={handleSaveDraft}\r\n      disabled={isDisabled}\r\n      className={cn(\r\n        'h-9 px-4 text-sm font-medium transition-all',\r\n        saveStatus === 'success' && 'bg-green-100 text-green-800 border-green-300 hover:bg-green-200',\r\n        saveStatus === 'error' && 'bg-red-100 text-red-800 border-red-300 hover:bg-red-200',\r\n        className\r\n      )}\r\n    >\r\n      {getButtonContent()}\r\n    </Button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AANA;;;;;;AAYO,SAAS,gBAAgB,KAAmC;QAAnC,EAAE,SAAS,EAAwB,GAAnC;;IAC9B,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAA,sJAAa;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAA+B;IAE3E,MAAM,kBAAkB;QACtB,IAAI,UAAU;QAEd,YAAY;QACZ,cAAc;QAEd,IAAI;YACF,gCAAgC;YAChC,IAAI,OAAO,MAAM,KAAK,GAAG;gBACvB,MAAM,IAAI,MAAM;YAClB;YAEA,IAAI,eAAe;gBACjB,MAAM,IAAI,MAAM;YAClB;YAEA,sBAAsB;YACtB,MAAM,aAAa;gBACjB;gBACA;gBACA,UAAU;oBACR,SAAS;oBACT,cAAc,IAAI,OAAO,WAAW;oBACpC,YAAY,OAAO,MAAM;oBACzB,WAAW,MAAM,MAAM;gBACzB;YACF;YAEA,cAAc;YACd,MAAM,WAAW,MAAM,MAAM,+BAA+B;gBAC1D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe;gBACjB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;YACvC;YAEA,cAAc;YAEd,4CAA4C;YAC5C,WAAW;gBACT,cAAc;YAChB,GAAG;QAEL,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;YACrC,cAAc;YAEd,0CAA0C;YAC1C,WAAW;gBACT,cAAc;YAChB,GAAG;QACL,SAAU;YACR,YAAY;QACd;IACF;IAEA,MAAM,mBAAmB;QACvB,OAAQ;YACN,KAAK;gBACH,qBACE;;sCACE,6LAAC,6OAAW;4BAAC,WAAU;;;;;;wBAAiB;;;YAI9C,KAAK;gBACH,qBACE;;sCACE,6LAAC,sOAAW;4BAAC,WAAU;;;;;;wBAAiB;;;YAI9C;gBACE,qBACE;;sCACE,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBACf,WAAW,cAAc;;;QAGlC;IACF;IAEA,MAAM,mBAAmB;QACvB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,aAAa,YAAY,OAAO,MAAM,KAAK,KAAK;IAEtD,qBACE,6LAAC,+IAAM;QACL,SAAS;QACT,SAAS;QACT,UAAU;QACV,WAAW,IAAA,4HAAE,EACX,+CACA,eAAe,aAAa,mEAC5B,eAAe,WAAW,2DAC1B;kBAGD;;;;;;AAGP;GA1HgB;;QACyB,sJAAa;;;KADtC","debugId":null}},
    {"offset": {"line": 6025, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/components/table-management/ActivateLayoutButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { \r\n  Dialog, \r\n  DialogContent, \r\n  DialogDescription, \r\n  DialogHeader, \r\n  DialogTitle, \r\n  DialogTrigger,\r\n  DialogFooter,\r\n  DialogClose\r\n} from '@/components/ui/dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Play, CheckCircle, AlertCircle, Zap } from 'lucide-react';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ActivateLayoutButtonProps {\r\n  className?: string;\r\n}\r\n\r\nexport function ActivateLayoutButton({ className }: ActivateLayoutButtonProps) {\r\n  const { tables, zones, hasOverlaps } = useTableStore();\r\n  const [isActivating, setIsActivating] = useState(false);\r\n  const [activateStatus, setActivateStatus] = useState<'idle' | 'success' | 'error'>('idle');\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n\r\n  const handleActivateLayout = async () => {\r\n    if (isActivating) return;\r\n    \r\n    setIsActivating(true);\r\n    setActivateStatus('idle');\r\n\r\n    try {\r\n      // Validate layout before activation\r\n      if (tables.length === 0) {\r\n        throw new Error('Layout must contain at least one table');\r\n      }\r\n\r\n      if (hasOverlaps()) {\r\n        throw new Error('Cannot activate layout with overlapping tables');\r\n      }\r\n\r\n      // Prepare activation data\r\n      const activationData = {\r\n        tables,\r\n        zones,\r\n        metadata: {\r\n          version: '1.0',\r\n          activatedAt: new Date().toISOString(),\r\n          activatedBy: 'current-user', // TODO: Get from auth context\r\n          tableCount: tables.length,\r\n          zoneCount: zones.length,\r\n        }\r\n      };\r\n\r\n      // Activate via API\r\n      const response = await fetch('/api/pos/floor/layout/activate', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-tenant-id': 'default', // TODO: Get from auth context\r\n        },\r\n        body: JSON.stringify(activationData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Failed to activate layout');\r\n      }\r\n\r\n      setActivateStatus('success');\r\n      setIsDialogOpen(false);\r\n      \r\n      // Auto-clear success status after 5 seconds\r\n      setTimeout(() => {\r\n        setActivateStatus('idle');\r\n      }, 5000);\r\n\r\n    } catch (error) {\r\n      console.error('Error activating layout:', error);\r\n      setActivateStatus('error');\r\n      \r\n      // Auto-clear error status after 5 seconds\r\n      setTimeout(() => {\r\n        setActivateStatus('idle');\r\n      }, 5000);\r\n    } finally {\r\n      setIsActivating(false);\r\n    }\r\n  };\r\n\r\n  const getButtonContent = () => {\r\n    switch (activateStatus) {\r\n      case 'success':\r\n        return (\r\n          <>\r\n            <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n            Layout Activated\r\n          </>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <>\r\n            <AlertCircle className=\"w-4 h-4 mr-2\" />\r\n            Activation Failed\r\n          </>\r\n        );\r\n      default:\r\n        return (\r\n          <>\r\n            <Play className=\"w-4 h-4 mr-2\" />\r\n            {isActivating ? 'Activating...' : 'Activate Layout'}\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  const getButtonVariant = () => {\r\n    switch (activateStatus) {\r\n      case 'success':\r\n        return 'default';\r\n      case 'error':\r\n        return 'destructive';\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  const isDisabled = isActivating || tables.length === 0 || hasOverlaps();\r\n\r\n  const validationIssues = [];\r\n  if (tables.length === 0) validationIssues.push('No tables in layout');\r\n  if (hasOverlaps()) validationIssues.push('Tables overlap');\r\n\r\n  return (\r\n    <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button\r\n          variant={getButtonVariant()}\r\n          disabled={isDisabled}\r\n          className={cn(\r\n            'h-9 px-4 text-sm font-medium transition-all',\r\n            activateStatus === 'success' && 'bg-green-100 text-green-800 border-green-300 hover:bg-green-200',\r\n            activateStatus === 'error' && 'bg-red-100 text-red-800 border-red-300 hover:bg-red-200',\r\n            className\r\n          )}\r\n        >\r\n          {getButtonContent()}\r\n        </Button>\r\n      </DialogTrigger>\r\n      \r\n      <DialogContent className=\"sm:max-w-md\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"flex items-center gap-2\">\r\n            <Zap className=\"w-5 h-5 text-orange-500\" />\r\n            Activate Floor Layout\r\n          </DialogTitle>\r\n          <DialogDescription>\r\n            This will make the current layout active for POS operations. \r\n            The previous active layout will be archived.\r\n          </DialogDescription>\r\n        </DialogHeader>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {/* Layout Summary */}\r\n          <div className=\"bg-gray-50 rounded-lg p-3 space-y-2\">\r\n            <h4 className=\"text-sm font-medium\">Layout Summary</h4>\r\n            <div className=\"flex flex-wrap gap-2 text-xs\">\r\n              <Badge variant=\"outline\">\r\n                {tables.length} {tables.length === 1 ? 'Table' : 'Tables'}\r\n              </Badge>\r\n              <Badge variant=\"outline\">\r\n                {zones.length} {zones.length === 1 ? 'Zone' : 'Zones'}\r\n              </Badge>\r\n              <Badge variant=\"outline\">\r\n                Total Capacity: {tables.reduce((sum: number, table: any) => sum + (table.capacity || table.seats || 4), 0)} seats\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Validation Status */}\r\n          <div className=\"space-y-2\">\r\n            <h4 className=\"text-sm font-medium\">Validation</h4>\r\n            {validationIssues.length === 0 ? (\r\n              <div className=\"flex items-center gap-2 text-green-600 text-sm\">\r\n                <CheckCircle className=\"w-4 h-4\" />\r\n                Layout is ready for activation\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-1\">\r\n                {validationIssues.map((issue, index) => (\r\n                  <div key={index} className=\"flex items-center gap-2 text-red-600 text-sm\">\r\n                    <AlertCircle className=\"w-4 h-4\" />\r\n                    {issue}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Warning */}\r\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-3\">\r\n            <div className=\"flex items-start gap-2\">\r\n              <AlertCircle className=\"w-4 h-4 text-orange-500 mt-0.5\" />\r\n              <div className=\"text-sm text-orange-700\">\r\n                <p className=\"font-medium\">Important Notice</p>\r\n                <p>Activating this layout will immediately affect POS operations. \r\n                Make sure the layout is tested and ready for use.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter className=\"gap-2\">\r\n          <DialogClose asChild>\r\n            <Button variant=\"outline\" size=\"sm\">\r\n              Cancel\r\n            </Button>\r\n          </DialogClose>\r\n          <Button \r\n            onClick={handleActivateLayout}\r\n            disabled={isActivating || validationIssues.length > 0}\r\n            size=\"sm\"\r\n            className=\"bg-orange-500 hover:bg-orange-600 text-white\"\r\n          >\r\n            <Zap className=\"w-4 h-4 mr-2\" />\r\n            {isActivating ? 'Activating...' : 'Activate Layout'}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6472, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/alvi/IOMS/IOMS_V1_POS_Working_main_20_08_2025/src/app/apps/pos/table-management/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { AppLayout } from '@/components/layout/AppLayout';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport { FloorEditorCanvas } from '@/components/table-management/FloorEditorCanvas';\r\nimport { TablePropertiesPanel } from '@/components/table-management/TablePropertiesPanel';\r\nimport { SaveDraftButton } from '@/components/table-management/SaveDraftButton';\r\nimport { ActivateLayoutButton } from '@/components/table-management/ActivateLayoutButton';\r\nimport { useTableStore } from '@/lib/stores/tableStore';\r\nimport { Plus, Square, Circle, RectangleHorizontal, Sparkles } from 'lucide-react';\r\n\r\nexport default function TableManagementPage() {\r\n  const { \r\n    addTable, \r\n    selectedTable, \r\n    hasOverlap, \r\n    hasDraft,\r\n    canvasSize \r\n  } = useTableStore();\r\n\r\n  // Add table handlers\r\n  const addRoundTable = () => {\r\n    addTable({\r\n      x: 100,\r\n      y: 100,\r\n      w: 60,\r\n      h: 60,\r\n      shape: 'round',\r\n      capacity: 4,\r\n    });\r\n  };\r\n\r\n  const addSquareTable = () => {\r\n    addTable({\r\n      x: 200,\r\n      y: 100,\r\n      w: 60,\r\n      h: 60,\r\n      shape: 'square',\r\n      capacity: 4,\r\n    });\r\n  };\r\n\r\n  const addRectTable = () => {\r\n    addTable({\r\n      x: 300,\r\n      y: 100,\r\n      w: 100,\r\n      h: 60,\r\n      shape: 'rect',\r\n      capacity: 6,\r\n    });\r\n  };\r\n\r\n  const isOverlapping = hasOverlap();\r\n\r\n  return (\r\n    <AppLayout pageTitle=\"Table Management\">\r\n      <div className=\"container mx-auto p-6\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">Table Management</h1>\r\n              <p className=\"text-muted-foreground mt-1\">\r\n                Design your restaurant floor layout with AI-powered Agent assistance\r\n              </p>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-2\">\r\n              <SaveDraftButton />\r\n              <ActivateLayoutButton disabled={isOverlapping} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status indicators */}\r\n          <div className=\"flex items-center gap-4 mb-4\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <Badge variant=\"outline\" className=\"bg-green-50 text-green-700 border-green-200\">\r\n                <Circle className=\"w-3 h-3 mr-1 fill-current\" />\r\n                Free\r\n              </Badge>\r\n              <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 border-blue-200\">\r\n                <Circle className=\"w-3 h-3 mr-1 fill-current\" />\r\n                Seated\r\n              </Badge>\r\n              <Badge variant=\"outline\" className=\"bg-gray-50 text-gray-700 border-gray-200\">\r\n                <Circle className=\"w-3 h-3 mr-1 fill-current\" />\r\n                Dirty\r\n              </Badge>\r\n              <Badge variant=\"outline\" className=\"bg-yellow-50 text-yellow-700 border-yellow-200\">\r\n                <Circle className=\"w-3 h-3 mr-1 fill-current\" />\r\n                Reserved\r\n              </Badge>\r\n            </div>\r\n            \r\n            {isOverlapping && (\r\n              <Badge variant=\"destructive\" className=\"animate-pulse\">\r\n                âš ï¸ Overlapping tables detected\r\n              </Badge>\r\n            )}\r\n            \r\n            {hasDraft && (\r\n              <Badge variant=\"secondary\">\r\n                ðŸ“ Unsaved draft\r\n              </Badge>\r\n            )}\r\n          </div>\r\n\r\n          {/* Add table controls */}\r\n          <Card className=\"mb-6\">\r\n            <CardHeader>\r\n              <CardTitle className=\"text-lg flex items-center gap-2\">\r\n                <Plus className=\"w-5 h-5\" />\r\n                Add Tables\r\n              </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"flex gap-3\">\r\n                <Button \r\n                  variant=\"outline\" \r\n                  onClick={addRoundTable}\r\n                  className=\"flex items-center gap-2\"\r\n                >\r\n                  <Circle className=\"w-4 h-4\" />\r\n                  Round (60Ã—60)\r\n                </Button>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  onClick={addSquareTable}\r\n                  className=\"flex items-center gap-2\"\r\n                >\r\n                  <Square className=\"w-4 h-4\" />\r\n                  Square (60Ã—60)\r\n                </Button>\r\n                <Button \r\n                  variant=\"outline\" \r\n                  onClick={addRectTable}\r\n                  className=\"flex items-center gap-2\"\r\n                >\r\n                  <RectangleHorizontal className=\"w-4 h-4\" />\r\n                  Rectangle (100Ã—60)\r\n                </Button>\r\n              </div>\r\n              <p className=\"text-sm text-muted-foreground mt-2\">\r\n                ðŸ’¡ <strong>Smart Agent tip:</strong> Use arrow keys to nudge selected tables. Tables snap to 8px grid automatically.\r\n              </p>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Main layout */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\r\n          {/* Canvas */}\r\n          <div className=\"lg:col-span-3\">\r\n            <Card className=\"h-full\">\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center justify-between\">\r\n                  <span>Floor Layout Canvas</span>\r\n                  <div className=\"text-sm text-muted-foreground\">\r\n                    {canvasSize.width} Ã— {canvasSize.height}px\r\n                  </div>\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent className=\"p-0\">\r\n                <FloorEditorCanvas />\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          {/* Properties Panel */}\r\n          <div className=\"lg:col-span-1\">\r\n            <Card className=\"sticky top-6\">\r\n              <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                  <Sparkles className=\"w-5 h-5\" />\r\n                  Table Properties\r\n                </CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {selectedTable ? (\r\n                  <TablePropertiesPanel />\r\n                ) : (\r\n                  <div className=\"text-center py-8 text-muted-foreground\">\r\n                    <div className=\"text-4xl mb-3\">ðŸ½ï¸</div>\r\n                    <p className=\"text-sm\">\r\n                      Select a table to edit its properties\r\n                    </p>\r\n                    <p className=\"text-xs mt-2\">\r\n                      Click any table on the canvas to get started\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Success message after activation */}\r\n        <div className=\"mt-6\">\r\n          <Card className=\"bg-gradient-to-r from-green-50 to-blue-50 border-green-200\">\r\n            <CardContent className=\"pt-6\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"text-2xl\">ðŸŽ‰</div>\r\n                <div>\r\n                  <h3 className=\"font-semibold text-green-800\">What you just unlocked</h3>\r\n                  <p className=\"text-sm text-green-700\">\r\n                    Seating errors â†“ 40% â€¢ Save 4â€“6 hours/month â€¢ Real-time status tracking â€¢ QR code integration ready\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </AppLayout>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}